{%- assign styleFormBgColorBrightness = settings.style_form_bg_color | color_brightness -%}
{%- assign styleFormBorderColorBrightness = settings.style_form_border_color | color_brightness -%}
{%- assign styleTextColorBrightness = settings.style_text_color | color_brightness -%}
{%- assign styleTableBgColorBrightness = settings.style_table_bg_color | color_brightness -%}
{%- assign styleBgColorBrightness = settings.style_bg_color | color_brightness -%}
{%- assign styleBorderColorBrightness = settings.style_border_color | color_brightness -%}
{%- assign styleButtonBgColorColorBrightness = settings.style_btn_bg_color | color_brightness -%}
{%- assign styleAccentColorBrightness = settings.style_accent_color | color_brightness -%}
{%- assign bodySecondaryBg = settings.style_bg_color | color_darken: 30 -%}
{%- assign bodyTertiaryBg = settings.style_bg_color | color_darken: 10 -%}

$font-size-base: 1rem * {{- settings.textScale -}};
$font-family-base: {{- settings.bodyTextFont -}};
$font-style: {{- settings.bodyTextFontStyle -}};
$letter-spacing: {{- settings.bodyLetterSpacing -}};
$line-height-base: {{- settings.textLineHeight -}};

$h1-font-size: 1.85rem * {{- settings.headingFontScale -}};
$h2-font-size: 1.55rem * {{- settings.headingFontScale -}};
$h3-font-size: 1.35rem * {{- settings.headingFontScale -}};
$h4-font-size: 1.15rem * {{- settings.headingFontScale -}};
$h5-font-size: 1.05rem * {{- settings.headingFontScale -}};
$h6-font-size: 0.82rem * {{- settings.headingFontScale -}};
	
$headings-font-family: {{- settings.headingFont -}};
$headings-font-weight: {{- settings.headingFontWeight -}};
$headings-font-style: {{- settings.headingFontStyle -}};
$headings-text-transform: {{- settings.headingTextTransform -}};
$headings-letter-spacing: {{- settings.headingLetterSpacing -}};

$subheadings-font-family: {{- settings.subheadingFont -}};
$subheadings-font-weight: {{- settings.subheadingFontWeight -}};
$subheadings-font-style: {{- settings.subheadingFontStyle -}};
$subheadings-text-transform: {{- settings.subheadingTextTransform -}};
$subheadings-letter-spacing: {{- settings.subheadingLetterSpacing -}};

$overlines-font-family: {{- settings.overlineFont -}};
$overlines-font-weight: {{- settings.overlineFontWeight -}};
$overlines-font-style: {{- settings.overlineFontStyle -}};
$overlines-text-transform: {{- settings.overlineTextTransform -}};
$overlines-letter-spacing: {{- settings.overlineLetterSpacing -}};

$accent-font-family: {{- settings.accentFont -}};
$accent-font-weight: {{- settings.accentFontWeight -}};
$accent-font-style: {{- settings.accentFontStyle -}};
$accent-text-transform: {{- settings.accentTextTransform -}};

$navigation-font-size: 1rem * {{- settings.navigationFontScale -}};
$navigation-font-family: {{- settings.navigationFont -}};
$navigation-font-weight: {{- settings.navigationFontWeight -}};
$navigation-font-style: {{- settings.navigationFontStyle -}};
$navigation-text-transform: {{- settings.navigationTextTransform -}};
$navigation-letter-spacing: {{- settings.navigationLetterSpacing -}};
	
$btn-font-family: {{- settings.buttonFont -}};
$btn-font-weight: {{- settings.buttonFontWeight -}};
$btn-font-style: {{- settings.buttonFontStyle -}};
$btn-text-transform: {{- settings.buttonTextTransform -}};
$btn-letter-spacing: {{- settings.buttonLetterSpacing -}};
$btn-primary-variant: {{- settings.styleButtonPrimaryVariant -}};
$btn-secondary-variant: {{- settings.styleButtonSecondaryVariant -}};
$btn-padding-y: {{- settings.styleBtnPaddingY -}};
$btn-padding-x: {{- settings.styleBtnPaddingX -}};

$input-btn-padding-y: {{- settings.styleInputBtnPaddingY -}};
$input-btn-padding-x: {{- settings.styleInputBtnPaddingX -}};

$form-floating-content-height: {{- settings.styleFormFloatingHeight }};
$form-floating-line-height: {{- settings.styleFormFloatingLineHeight -}};
$form-floating-padding-x: {{- settings.styleFormFloatingPaddingX -}};
$form-floating-padding-y: {{- settings.styleFormFloatingPaddingY -}};
$form-floating-input-padding-t: {{- settings.styleFormFloatingInputPaddingT -}};
$form-floating-input-padding-b: {{- settings.styleFormFloatingInputPaddingB -}};
$form-floating-label-height: {{- settings.styleFormFloatingLabelHeight -}};

$announcementFontScale: {{ settings.styleAnnouncementFontScale }};

$container-max-widths: (
	sm: {{ settings.styleGridContainerMaxWidthSm }},
	md: {{ settings.styleGridContainerMaxWidthMd }},
	lg: {{ settings.styleGridContainerMaxWidthLg }},
	xl: {{ settings.styleGridContainerMaxWidthXl }},
	xxl: {{ settings.styleGridContainerMaxWidthXxl }}
);

$container-custom-max-widths: (
	tiny: {{ settings.styleGridContainerMaxWidthTiny }},
	compact: {{ settings.styleGridContainerMaxWidthCompact }},
	fair: {{ settings.styleGridContainerMaxWidthFair }}
);

$container-padding-x: var(--style-grid-container-padding-x);

$grid-columns: 12;
$grid-gutter-width: var(--style-grid-gutter-width);
$grid-row-columns: 10;

$grid-breakpoints: (
	xs: 0,
	sm: {{ settings.styleGridBreakpointSm }},
	md: {{ settings.styleGridBreakpointMd }},
	lg: {{ settings.styleGridBreakpointLg }},
	xl: {{ settings.styleGridBreakpointXl }},
	xxl: {{ settings.styleGridBreakpointXxl }},
);

$aspect-ratios: (
	'21-9': '21:9',
	'16-10': '16:10',
	'16-9': '16:9',
	'9-13': '9:13',
	'9-12': '9:12',
	'9-11': '9:11',
	'4-5': '4:5',
	'4-3': '4:3',
	'3-5': '3:5',
	'3-4': '3:4',
	'1-1': '1:1',
	'product': '{{- settings.productImageAspectRatio -}}',
	'article': '{{- settings.articleImageAspectRatio -}}'
);

$product-image-aspect-ratio-fit: {{- settings.productImageAspectRatioFit -}};
$article-image-aspect-ratio-fit: {{- settings.articleImageAspectRatioFit -}};

$product-wrap-name: {%- if settings.productWrapName -%}'true'{%- else -%}'false'{%- endif -%};

$section-highlight-item-border: {%- if settings.sectionHighlightItemBorder -%}'true'{%- else -%}'false'{%- endif -%};
$section-text-align: {{- settings.sectionTextAlign -}};

$spacer: 1rem;
$spacers: (
	0: 0,
	1: ($spacer * .28569),
	2: ($spacer * .5),
	3: $spacer,
	4: ($spacer * 1.5),
	5: ($spacer * 2),
	6: ($spacer * 2.5715),
	7: ($spacer * 3.5),
	8: ($spacer * 4.5),
	9: ($spacer * 5),
	10: ($spacer * 6),
	11: ($spacer * 7),
	12: ($spacer * 8),
	'g': var(--style-grid-gutter-width),
	'c': var(--style-grid-container-padding-x)
);

$enable-input-borders: {%- if settings.styleInputBorder -%}'true'{%- else -%}'false'{%- endif -%};

$body-bg: {{ settings.style_bg_color }};
$body-color: {{ settings.style_text_color }};

$body-secondary-bg: {{ bodySecondaryBg }};
$body-secondary-color: {{ settings.style_text_color | color_modify: 'alpha', 0.75 | color_min_contrast: bodySecondaryBg }};

$body-tertiary-bg: {{ bodyTertiaryBg }};
$body-tertiary-color: {{ settings.style_text_color | color_modify: 'alpha', 0.5 | color_min_contrast: bodyTertiaryBg }};

$body-emphasis-color: {{ settings.style_accent_color }};

$link-color: {{ settings.style_link_color }};
$link-hover-color: {{ settings.style_link_color }};

$form-select-indicator: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='none' stroke='{{ settings.style_form_text_color }}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/></svg>");

{%- if styleAccentColorBrightness > 190 -%}
	{%- assign formInputActiveColor = settings.style_form_text_color | color_min_contrast: settings.style_accent_color -%}
{%- else -%}
	{%- assign formInputActiveColor = '#ffffff' | color_min_contrast: settings.style_accent_color -%}
{%- endif -%}

{%- if styleFormBgColorBrightness > 190 -%}
	{%- assign formInputColor = settings.style_form_text_color | color_min_contrast: settings.style_accent_color -%}
{%- else -%}
	{%- assign formInputColor = '#ffffff' | color_min_contrast: settings.style_accent_color -%}
{%- endif -%}

$form-check-input-checked-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='none' stroke='{{ formInputActiveColor }}' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/></svg>");
$form-check-radio-checked-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='2' fill='{{ formInputActiveColor }}'/></svg>");
$form-check-input-indeterminate-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='none' stroke='{{ formInputActiveColor }}' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/></svg>");

$form-switch-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='3' fill='{{ formInputColor }}'/></svg>");
$form-switch-focus-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='3' fill='{{ formInputColor }}'/></svg>");
$form-switch-checked-bg-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='3' fill='{{ formInputActiveColor }}'/></svg>");

:root {
	--style-accent-color: {{ settings.style_accent_color }};
    --style-heading-color: {{ settings.style_heading_color }};
    --style-subheading-color: {{ settings.style_subheading_color }};
    --style-overline-color: {{ settings.style_overline_color }};
    --style-text-color: {{ settings.style_text_color }};
    --style-link-color: {{ settings.style_link_color }};
    --style-icon-color: {{ settings.style_icon_color }};
    --style-border-color: {{ settings.style_border_color }};
    --style-btn-bg-color: {{ settings.style_btn_bg_color }};
    --style-btn-text-color: {{ settings.style_btn_text_color }};
    --style-bg-color: {{ settings.style_bg_color }};
    --style-secondary-bg-color: {{ settings.style_secondary_bg_color }};
    --style-product-title-color: {{ settings.style_product_title_color }};
    --style-price-color: {{ settings.style_price_color }};
    --style-sale-price-color: {{ settings.style_sale_price_color }};
    --style-badge-bg-color: {{ settings.style_badge_bg_color }};
    --style-badge-text-color: {{ settings.style_badge_text_color | color_min_contrast: settings.style_badge_bg_color }};
    --style-new-badge-bg-color: {{ settings.style_new_badge_bg_color }};
    --style-new-badge-text-color: {{ settings.style_new_badge_text_color | color_min_contrast: settings.style_new_badge_bg_color }};
    --style-discount-badge-bg-color: {{ settings.style_discount_badge_bg_color }};
    --style-discount-badge-text-color: {{ settings.style_discount_badge_text_color | color_min_contrast: settings.style_discount_badge_bg_color }};
	--style-promotion-badge-bg-color: {{ settings.style_promotion_badge_bg_color }};
    --style-promotion-badge-text-color: {{ settings.style_promotion_badge_text_color | color_min_contrast: settings.style_promotion_badge_bg_color }};
	--style-review-icon-color: {{ settings.style_review_icon_color | default: settings.style_icon_color }};
    --style-table-bg-color: {{ settings.style_table_bg_color }};
    --style-table-text-color: {{ settings.style_table_text_color }};
    --style-table-border-color: {{ settings.style_table_border_color }};
	--style-form-bg-color: {{ settings.style_form_bg_color }};
    --style-form-text-color: {{ settings.style_form_text_color }};
    --style-form-border-color: {{ settings.style_form_border_color }};

	--style-header-bg-color: {{ settings.style_header_bg_color }};
	--style-header-text-color: {{ settings.style_header_text_color }};
	--style-header-accent-color: {{ settings.style_header_accent_color }};

	--style-footer-bg-color: {{ settings.style_footer_bg_color }};
	--style-footer-text-color: {{ settings.style_footer_text_color }};

	--style-announcement-bg-color: {{ settings.style_announcement_bg_color }};
	--style-announcement-text-color: {{ settings.style_announcement_text_color }};

	{%- if styleFormBgColorBrightness > 190 -%}
		--style-form-bg-hover-color: {{ settings.style_form_bg_color | color_darken: 5 }};
		--style-form-bg-disabled-color: {{ settings.style_form_bg_color | color_darken: 10 }};
	{%- else -%}
		--style-form-bg-hover-color: {{ settings.style_form_bg_color | color_lighten: 5 }};
		--style-form-bg-disabled-color: {{ settings.style_form_bg_color | color_lighten: 10 }};
	{%- endif -%}

	{%- if styleFormBorderColorBrightness > 190 -%}
		--style-form-border-focus-color: {{ settings.style_form_border_color | color_darken: 10 }};
		--style-form-border-disabled-color: {{ settings.style_form_border_color | color_darken: 10 }};
	{%- else -%}
		--style-form-border-focus-color: {{ settings.style_form_border_color | color_lighten: 10 }};
		--style-form-border-disabled-color: {{ settings.style_form_border_color | color_lighten: 10 }};
	{%- endif -%}

	{%- if styleTextColorBrightness > 190 -%}
		--style-text-accent-color: {{ settings.style_text_color | color_darken: 10 | color_min_contrast: settings.style_bg_color }};
		--style-text-muted-color: {{ settings.style_text_color | color_darken: 30 | color_min_contrast: settings.style_bg_color }};
	{%- else -%}
		--style-text-accent-color: {{ settings.style_text_color | color_lighten: 10 | color_min_contrast: settings.style_bg_color }};
		--style-text-muted-color: {{ settings.style_text_color | color_lighten: 30 | color_min_contrast: settings.style_bg_color }};
	{%- endif -%}

	{%- if styleTableBgColorBrightness > 190 -%}
		--style-table-bg-hover-color: {{ settings.style_table_bg_color | color_darken: 4 }};
	{%- else -%}
		--style-table-bg-hover-color: {{ settings.style_table_bg_color | color_lighten: 4 }};
	{%- endif -%}

	{%- if styleBgColorBrightness > 190 -%}
		--pswp-bg: #000;
		--pswp-placeholder-bg: #222;
		--pswp-icon-color: #fff;
		--swiper-theme-color: {{ settings.style_accent_color }};
		--swiper-btn-bg-color: {{ settings.style_bg_color }};
		--swiper-btn-color: {{ settings.style_icon_color }};
		--swiper-btn-border-color: {{ settings.style_bg_color | color_darken: 30 }};
		--swiper-pagination-bullet-color: {{ settings.style_bg_color | color_darken: 70 }};
        --swiper-pagination-bullet-active-color: {{ settings.style_accent_color }};
		--swiper-pagination-bullet-border-color: {{ settings.style_bg_color | color_darken: 70 }};
		--style-bg-hover-color: {{ settings.style_bg_color | color_darken: 5 }};
		--style-bg-accent-color: {{ settings.style_bg_color | color_darken: 7 }};
		--style-bg-disabled-color: {{ settings.style_bg_color | color_darken: 30 }};
	{%- else -%}
		--pswp-bg: #fff;
		--pswp-placeholder-bg: #222;
		--pswp-icon-color: #000;
		--swiper-theme-color: {{ settings.style_accent_color }};
		--swiper-btn-bg-color: {{ settings.style_bg_color }};
		--swiper-btn-color: {{ settings.style_icon_color }};
		--swiper-btn-border-color: {{ settings.style_bg_color | color_lighten: 30 }};
		--swiper-pagination-bullet-color: {{ settings.style_bg_color | color_lighten: 70 }};
        --swiper-pagination-bullet-active-color: {{ settings.style_accent_color }};
		--swiper-pagination-bullet-border-color: {{ settings.style_bg_color | color_lighten: 70 }};
		--style-bg-hover-color: {{ settings.style_bg_color | color_lighten: 5 }};
		--style-bg-accent-color: {{ settings.style_bg_color | color_lighten: 7 }};
		--style-bg-disabled-color: {{ settings.style_bg_color | color_lighten: 30 }};
	{%- endif -%}

	{%- if styleBorderColorBrightness > 190 -%}
		--style-border-accent-color: {{ settings.style_border_color | color_darken: 50 }};
	{%- else -%}
		--style-border-accent-color: {{ settings.style_border_color | color_lighten: 50 }};
	{%- endif -%}

	{%- if styleButtonBgColorColorBrightness > 190 -%}
		--style-btn-bg-active-color: {{ settings.style_btn_bg_color | color_darken: 10 }};
		--style-btn-bg-hover-color: {{ settings.style_btn_bg_color | color_darken: 8 }};
		--style-btn-border-hover-color: {{ settings.style_btn_bg_color | color_darken: 8 }};
		--style-btn-border-active-color: {{ settings.style_btn_bg_color | color_darken: 13 }};
	{%- else -%}
		--style-btn-bg-active-color: {{ settings.style_btn_bg_color | color_lighten: 10 }};
		--style-btn-bg-hover-color: {{ settings.style_btn_bg_color | color_lighten: 8 }};
		--style-btn-border-hover-color: {{ settings.style_btn_bg_color | color_lighten: 8 }};
		--style-btn-border-active-color: {{ settings.style_btn_bg_color | color_lighten: 13 }};
	{%- endif -%}

	{%- if styleAccentColorBrightness > 190 -%}
		--style-accent-text-color: {{ '#000000' | color_min_contrast: settings.style_accent_color }}
	{%- else -%}
		--style-accent-text-color: {{ '#ffffff' | color_min_contrast: settings.style_accent_color }}
	{%- endif -%}

	--pswp-icon-stroke-width: 0px;
	--pswp-icon-stroke-color: transparent;
	--pswp-preloader-color-secondary: transparent;
	--pswp-icon-color-secondary: transparent;
	
	--style-bg-light-color: {{ settings.style_bg_color | color_lighten: 35 }};
	--style-border-focus-color: {{ settings.style_border_color | color_lighten: 25 }};
	--style-btn-border-color: {{ settings.style_btn_bg_color }};
	
	--style-form-placeholder-color: {{ settings.style_form_text_color | color_lighten: 15 }};
	--style-form-bg-readonly-color: {{ settings.style_form_bg_color | color_lighten: 15 }};
	--style-text-darker-color: {{ settings.style_text_color | color_darken: 5 | color_min_contrast: settings.style_bg_color }};
	--style-accent-faded-color: {{ settings.style_accent_color | color_lighten: 30 }};

	{%- if settings.style_header_bg_color == settings.style_bg_color -%}
		--style-submenu-accent-color: {{ settings.style_header_accent_color }};
	{%- else -%}
		--style-submenu-accent-color: {{ settings.style_accent_color | color_min_contrast: settings.style_bg_color }};
	{%- endif -%}

	--style-loader-color: {{ settings.style_icon_color }};
	--style-loader-faded-color: {{ settings.style_icon_color | color_modify: 'alpha', 0.1 | color_min_contrast: settings.style_bg_color }};

	--style-border-radius: {{ settings.styleBorderRadius }};
	--style-btn-border-radius: {{ settings.styleButtonBorderRadius }};
	--style-input-border-radius: {{ settings.styleInputBorderRadius }};
	--style-component-border-radius: {{ settings.styleComponentBorderRadius }};
	--style-image-border-radius: {{ settings.styleImageBorderRadius }};
	--style-product-image-border-radius: {{ settings.styleProductImageBorderRadius }};

	--style-announcement-height: {{ settings.styleAnnouncementHeight }};
	--style-announcement-font-scale: {{ settings.styleAnnouncementFontScale }};

	--style-grid-container-padding-x: {{ settings.styleGridContainerPaddingX }};
	--style-grid-gutter-width: {{ settings.styleGridGutterWidth }};
	--style-grid-gutter-width-mobile: {{ settings.styleGridGutterWidth | replace: 'rem', '' | times: 0.5 | append: 'rem' }};

	--style-icon-stroke-width: {{ settings.styleIconStrokeWidth }};

	--style-underline-indicator-height: 2px;

	{%- if settings.navigationFontWeight > 400 -%}
		--style-navigation-icon-stroke-width: {{ settings.styleIconStrokeWidth | replace: 'px', '' | times: 1.5 | append: 'px' -}};
	{%- else -%}
		--style-navigation-icon-stroke-width: var(--style-icon-stroke-width);
	{%- endif -%}

	@each $key, $val in $spacers {
		--style-spacer-#{$key}: #{$val};
	}

	@each $key, $val in $container-max-widths {
		--style-container-max-width-#{$key}: #{$val};
	}

	@each $key, $val in $container-custom-max-widths {
		--style-container-max-width-#{$key}: #{$val};
	}

	@each $key, $val in $grid-breakpoints {
		--style-grid-breakpoint-#{$key}: #{$val};
	}
}

@import "scss/theme";