{%- assign footerBgColorBrightness = settings.style_footer_bg_color | color_brightness -%}
{%- assign footerContentColorBrightness = settings.style_footer_text_color | color_brightness -%}
{%- assign footerAccentColorBrightness = settings.style_footer_accent_color | color_brightness -%}

{%- capture sectionStyle -%}
    #finqu-section-{{ section.id }} {
        --site-footer-gap: {{ section.settings.footerGap }};
        --site-footer-padding-top: {{ section.settings.footerPaddingTop }};
        --site-footer-padding-bottom: {{ section.settings.footerPaddingBottom }};
        --style-bg-color: {{ settings.style_footer_bg_color }};
        --style-text-color: {{ settings.style_footer_text_color }};
        --style-link-color: {{ settings.style_footer_text_color }};
        --style-icon-color: {{ settings.style_footer_text_color }};
        --style-form-placeholder-color: {{ settings.style_footer_text_color }};
        --style-form-text-color: {{ settings.style_footer_text_color }};
        --style-form-border-color: {{ settings.style_footer_text_color }};
        --style-form-border-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 15 }};
        --style-form-border-focus-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 20 }};
        --style-form-border-disabled-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 10 }};
        --style-border-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 15 }};
        --style-border-focus-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 20 }};
        --style-border-accent-color: {{ settings.style_footer_text_color | color_mix: settings.style_footer_bg_color, 50 }};
        --style-btn-bg-color: {{ settings.style_footer_accent_color }};
        --style-btn-border-color: {{ settings.style_footer_accent_color }};
        --style-accent-color: {{ settings.style_footer_accent_color }};

        {%- if footerAccentColorBrightness > 190 -%}
            --style-btn-text-color: #000;
            --style-accent-text-color: #000;
        {%- else -%}
            --style-btn-text-color: #fff;
            --style-accent-text-color: #fff;
        {%- endif -%}

        {%- if footerContentColorBrightness > 190 -%}
            --style-btn-bg-active-color: {{ settings.style_footer_accent_color | color_darken: 10 }};
            --style-btn-bg-hover-color: {{ settings.style_footer_accent_color | color_darken: 8 }};
            --style-btn-border-hover-color: {{ settings.style_footer_accent_color | color_darken: 8 }};
            --style-btn-border-active-color: {{ settings.style_footer_accent_color | color_darken: 13 }};
        {%- else -%}
            --style-btn-bg-active-color: {{ settings.style_footer_accent_color | color_lighten: 10 }};
            --style-btn-bg-hover-color: {{ settings.style_footer_accent_color | color_lighten: 8 }};
            --style-btn-border-hover-color: {{ settings.style_footer_accent_color | color_lighten: 8 }};
            --style-btn-border-active-color: {{ settings.style_footer_accent_color | color_lighten: 13 }};
        {%- endif -%}

        {%- if footerBgColorBrightness > 190 -%}
            --style-heading-color: {{ settings.style_footer_text_color | color_darken: 10 }};
            --style-form-bg-hover-color: {{ settings.style_footer_bg_color | color_darken: 5 }};
            --style-form-bg-disabled-color: {{ settings.style_footer_bg_color | color_darken: 10 }};

            {%- if settings.styleInputBorder -%}
                --style-form-bg-color: {{ settings.style_footer_bg_color }};
            {%- else -%}
                --style-form-bg-color: {{ settings.style_footer_bg_color | color_darken: 5 }};
            {%- endif -%}

        {%- else -%}

            --style-heading-color: {{ settings.style_footer_text_color | color_lighten: 10 }};
            --style-form-bg-hover-color: {{ settings.style_footer_bg_color | color_lighten: 5 }};
            --style-form-bg-disabled-color: {{ settings.style_footer_bg_color | color_lighten: 10 }};

            {%- if settings.styleInputBorder -%}
                --style-form-bg-color: {{ settings.style_footer_bg_color }};
            {%- else -%}
                --style-form-bg-color: {{ settings.style_footer_bg_color | color_lighten: 5 }};
            {%- endif -%}
        {%- endif -%}

        --bs-body-bg: {{ settings.style_footer_bg_color }};
        --bs-body-bg-rgb: {{ settings.style_footer_bg_color | color_to_rgb | color_extract: 'rgb' | join: ', ' }};
        --bs-body-color: {{ settings.style_footer_text_color }};
        --bs-body-color-rgb: {{ settings.style_footer_text_color | color_to_rgb | color_extract: 'rgb' | join: ', ' }};

        --bs-secondary-bg: {{ settings.style_footer_bg_color | color_darken: 30 }};
        --bs-secondary-bg-rgb: {{ settings.style_footer_bg_color | color_darken: 30 | color_to_rgb | color_extract: 'rgb' | join: ', ' }};
        --bs-secondary-color: {{ settings.style_footer_text_color | color_modify: 'alpha', 0.75 }};
        --bs-secondary-color-rgb: {{ settings.style_footer_text_color | color_desaturate: 25 | color_to_rgb | color_extract: 'rgb' | join: ', ' }};

        --bs-tertiary-bg: {{ settings.style_footer_bg_color | color_darken: 10 }};
        --bs-tertiary-bg-rgb: {{ settings.style_footer_bg_color | color_darken: 10 | color_to_rgb | color_extract: 'rgb' | join: ', ' }};
        --bs-tertiary-color: {{ settings.style_footer_text_color | color_modify: 'alpha', 0.5 }};
        --bs-tertiary-color-rgb: {{ settings.style_footer_text_color | color_desaturate: 50 | color_to_rgb | color_extract: 'rgb' | join: ', ' }};

        --bs-emphasis-color: {{ settings.style_footer_accent_color }};
        --bs-emphasis-color-rgb: {{ settings.style_footer_accent_color | color_to_rgb | color_extract: 'rgb' | join: ', ' }};

        --bs-link-color: {{ settings.style_footer_text_color }};
        --bs-link-color-rgb: {{ settings.style_footer_text_color | color_to_rgb | color_extract: 'rgb' | join: ', ' }};
        --bs-link-hover-color: {{ settings.style_footer_text_color }};
        --bs-link-hover-color-rgb: {{ settings.style_footer_text_color | color_to_rgb | color_extract: 'rgb' | join: ', ' }};

        --bs-border-color: var(--style-border-color);
        --bs-heading-color: var(--style-heading-color);
    }
    {%- if section.settings.footerTopBorder -%}

        {%- if request.design_mode == 'edit' -%}
            .finqu-sections-container:has(> section:last-of-type .section-inner:not(.section-has-color-scheme)) + #finqu-section-{{ section.id }} .site-footer-top{% unless section.settings.footerTopBorderFluid %} > .container{% endunless %}:before,
        {%- endif -%}
        .section:not(:has(.section-has-color-scheme)) + #finqu-section-{{ section.id }} .site-footer-top{% unless section.settings.footerTopBorderFluid %} > .container{% endunless %}:before {
            content: '';
            display: block;
            border-top: 1px solid var(--style-border-color);
            position: absolute;
            top: 0;
            left: {% if section.settings.footerTopBorderFluid %}0{% else %}var(--style-grid-container-padding-x){% endif %};
            right: {% if section.settings.footerTopBorderFluid %}0{% else %}var(--style-grid-container-padding-x){% endif %};
        }
        #finqu-section-{{ section.id }} .site-footer-top{% unless section.settings.footerTopBorderFluid %} > .container{% endunless %} {
            position: relative;
            padding-top: var(--section-padding-top);
        }
        {%- unless section.settings.footerLayout == '4' .%}
            #finqu-section-{{ section.id }} .section-inner {
                padding-top: 0;
            }
        {%- endunless -%}
    {%- endif -%}
    {%- if section.settings.footerBottomBorder -%}
        #finqu-section-{{ section.id }} .site-footer-bottom{% unless section.settings.footerBottomBorderFluid %} > .container{% endunless %}:before {
            content: '';
            display: block;
            border-top: 1px solid var(--style-border-color);
            position: absolute;
            top: 0;
            left: {% if section.settings.footerBottomBorderFluid %}0{% else %}var(--style-grid-container-padding-x){% endif %};
            right: {% if section.settings.footerBottomBorderFluid %}0{% else %}var(--style-grid-container-padding-x){% endif %};
        }
        #finqu-section-{{ section.id }} .site-footer-bottom{% unless section.settings.footerBottomBorderFluid %} > .container{% endunless %} {
            position: relative;
            padding-top: var(--section-padding-bottom);
        }
    {%- endif -%}
{%- endcapture -%}

<style>{{ sectionStyle | strip | replace: '  ', '' | strip_newlines }}</style>

{%- if section.settings.footerLayout == '1' -%}

    {%- render 'footers/layout-1', section: section -%}

{%- elsif section.settings.footerLayout == '2' -%}

    {%- render 'footers/layout-2', section: section -%}

{%- elsif section.settings.footerLayout == '3' -%}

    {%- render 'footers/layout-3', section: section -%}

{%- elsif section.settings.footerLayout == '4' -%}

    {%- render 'footers/layout-4', section: section -%}

{%- elsif section.settings.footerLayout == '5' -%}

    {%- render 'footers/layout-5', section: section -%}

{%- elsif section.settings.footerLayout == '6' -%}

    {%- render 'footers/layout-6', section: section -%}

{%- endif -%}

{% schema %}
{
    "name": {
        "en": "Footer",
        "fi": "Alatunniste"
    },
    "tag": "section",
    "is_creatable": false,
    "is_removable": false,
    "class": "section section-site-footer",
    "settings": {
        "list_type": "tabs",
        "groups": [
            {
                "title": {
                    "en": "Content",
                    "fi": "Sisältö"
                },
                "settings": {
                    "list_type": "list",
                    "groups": [
                        {
                            "title": {
                                "en": "Introduction text",
                                "fi": "Esittelyteksti"
                            },
                            "settings": [
                                {
                                    "id": "footerTextArea1Title",
                                    "type": "text",
                                    "label": {
                                        "en": "Title",
                                        "fi": "Otsikko"
                                    }
                                },
                                {
                                    "id": "footerTextArea1Content",
                                    "type": "richtext",
                                    "mode": "simple",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sisältö"
                                    }
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Additional text",
                                "fi": "Lisäteksti"
                            },
                            "settings": [
                                {
                                    "id": "footerTextArea2Content",
                                    "type": "richtext",
                                    "mode": "simple",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sisältö"
                                    }
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Newsletter",
                                "fi": "Uutiskirje"
                            },
                            "settings": [
                                {
                                    "id": "footerNewsletterTitle",
                                    "type": "text",
                                    "label": {
                                        "en": "Title",
                                        "fi": "Otsikko"
                                    }
                                },
                                {
                                    "id": "footerNewsletterContent",
                                    "type": "richtext",
                                    "mode": "simple",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sisältö"
                                    }
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Social media",
                                "fi": "Sosiaalinen media"
                            },
                            "conditions": ["footerLayout eq 3"],
                            "settings": [
                                {
                                    "id": "footerSocialMediaTitle",
                                    "type": "text",
                                    "label": {
                                        "en": "Title",
                                        "fi": "Otsikko"
                                    },
                                    "conditions": ["footerLayout eq 3"]
                                },
                                {
                                    "id": "footerSocialMediaContent",
                                    "type": "richtext",
                                    "mode": "simple",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sisältö"
                                    },
                                    "conditions": ["footerLayout eq 3"]
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Payment methods",
                                "fi": "Maksutavat"
                            },
                            "settings": [
                                {
                                    "id": "footerPaymentMethodsImg",
                                    "type": "image-picker",
                                    "label": {
                                        "en": "Image",
                                        "fi": "Kuva"
                                    }
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Logo",
                                "fi": "Logo"
                            },
                            "conditions": ["footerLayout in 5,6"],
                            "settings": [
                                {
                                    "type": "title",
                                    "label": {
                                        "en": "Image",
                                        "fi": "Kuva"
                                    },
                                    "conditions": ["footerLayout in 5,6"]
                                },
                                {
                                    "id": "footerLogoImg",
                                    "type": "image-picker",
                                    "conditions": ["footerLayout in 5,6"]
                                }
                            ]
                        }
                    ]
                }
            },
            {   
                "title": {
                    "en": "Navigation",
                    "fi": "Navigointi"
                },
                "settings": [
                    {
                        "type": "title",
                        "label": {
                            "en": "Navigation 1",
                            "fi": "Navigaatio 1"
                        }
                    },
                    {
                        "id": "footerMenu1Title",
                        "type": "text",
                        "label": {
                            "en": "Title",
                            "fi": "Otsikko"
                        },
                        "conditions": ["!footerMenu1 eq blank"]
                    },
                    {
                        "id": "footerMenu1",
                        "type": "menu",
                        "label": {
                            "en": "Menu",
                            "fi": "Valikko"
                        },
                        "default": "footer",
                        "allow_empty": true
                    },
                    {
                        "type": "title",
                        "label": {
                            "en": "Navigation 2",
                            "fi": "Navigaatio 2"
                        },
                        "conditions": ["footerLayout in 1,2,3,5,6"]
                    },
                    {
                        "id": "footerMenu2Title",
                        "type": "text",
                        "label": {
                            "en": "Title",
                            "fi": "Otsikko"
                        },
                        "conditions": [
                            "!footerMenu2 eq blank",
                            "footerLayout in 1,2,3,5,6"
                        ]
                    },
                    {
                        "id": "footerMenu2",
                        "type": "menu",
                        "label": {
                            "en": "Menu",
                            "fi": "Valikko"
                        },
                        "default": "footer",
                        "conditions": ["footerLayout in 1,2,3,5,6"],
                        "allow_empty": true
                    },
                    {
                        "type": "title",
                        "label": {
                            "en": "Navigation 3",
                            "fi": "Navigaatio 3"
                        },
                        "conditions": ["footerLayout in 1,5"]
                    },
                    {
                        "id": "footerMenu3Title",
                        "type": "text",
                        "label": {
                            "en": "Title",
                            "fi": "Otsikko"
                        },
                        "conditions": [
                            "!footerMenu3 eq blank",
                            "footerLayout in 1,5"
                        ]
                    },
                    {
                        "id": "footerMenu3",
                        "type": "menu",
                        "label": {
                            "en": "Menu",
                            "fi": "Valikko"
                        },
                        "default": "footer",
                        "conditions": ["footerLayout in 1,5"],
                        "allow_empty": true
                    }
                ]
            },
            {   
                "title": {
                    "en": "Settings",
                    "fi": "Asetukset"
                },
                "settings": [
                    {
                        "type": "hidden",
                        "id": "footerGap"
                    },
                    {
                        "type": "hidden",
                        "id": "footerPaddingTop"
                    },
                    {
                        "type": "hidden",
                        "id": "footerPaddingBottom"
                    },
                    {
                        "type": "hidden",
                        "id": "footerTopBorder",
                        "default": false
                    },
                    {
                        "type": "hidden",
                        "id": "footerTopBorderFluid",
                        "default": false
                    },
                    {
                        "type": "hidden",
                        "id": "footerBottomBorder",
                        "default": false
                    },
                    {
                        "type": "hidden",
                        "id": "footerBottomBorderFluid",
                        "default": false
                    },
                    {
                        "type": "title",
                        "label": {
                            "en": "View",
                            "fi": "Asettelu"
                        }
                    },
                    {
                        "id": "footerLayout",
                        "type": "radio-pill",
                        "default": "1",
                        "options": [
                            {
                                "value": "1",
                                "label": "1"
                            },
                            {
                                "value": "2",
                                "label": "2"
                            },
                            {
                                "value": "3",
                                "label": "3"
                            },
                            {
                                "value": "4",
                                "label": "4"
                            },
                            {
                                "value": "5",
                                "label": "5"
                            },
                            {
                                "value": "6",
                                "label": "6"
                            }
                        ]
                    },
                    {
                        "type": "title",
                        "label": {
                            "en": "Show",
                            "fi": "Näytä"
                        }
                    },
                    {
                        "id": "footerTextArea1Status",
                        "type": "checkbox",
                        "label": {
                            "en": "Introduction text",
                            "fi": "Esittelyteksti"
                        },
                        "default": true
                    },
                    {
                        "id": "footerTextArea2Status",
                        "type": "checkbox",
                        "label": {
                            "en": "Additional text",
                            "fi": "Lisäteksti"
                        },
                        "default": true
                    },
                    {
                        "id": "footerNewsletterStatus",
                        "type": "checkbox",
                        "label": {
                            "en": "Newsletter subscribe",
                            "fi": "Uutiskirjeen tilaus"
                        },
                        "default": true
                    },
                    {
                        "id": "footerSocialMediaButtonsStatus",
                        "type": "checkbox",
                        "label": {
                            "en": "Social media buttons",
                            "fi": "Sosiaalisen median kuvakkeet"
                        },
                        "default": true
                    },
                    {
                        "id": "footerPaymentMethodsStatus",
                        "type": "checkbox",
                        "label": {
                            "en": "Payment methods",
                            "fi": "Maksutavat"
                        },
                        "default": true
                    },
                    {
                        "id": "footerLogoStatus",
                        "type": "checkbox",
                        "label": {
                            "en": "Logo",
                            "fi": "Logo"
                        },
                        "default": true,
                        "conditions": ["footerLayout in 5,6"]
                    }
                ]
            }
        ]
    }
}
{% endschema %}