{%- capture sectionContent -%}

    {% if request.uri contains 'create_review=true' and product.default_or_selected_variant.customer_has_reviewed == false and product.reviews_are_enabled %}

        <div class="product-create-review-layout">

            {% form 'review', product id: 'product-review-form' %}

                <div class="mb-4 form-floating">

                    <input
                        name="name"
                        type="text"
                        id="product-review-name"
                        class="form-control"
                        placeholder="{{ 'general.name' | t }}"
                        value="{{ form.submitted.name | escape }}"
                        required>

                    <label for="product-review-name">
                        {{- 'general.name' | t -}}
                    </label>

                </div>

                <div class="mb-4 form-floating">

                    <input
                        name="title"
                        type="text"
                        id="product-review-title"
                        class="form-control"
                        placeholder="{{ 'general.title' | t }}"
                        value="{{ form.submitted.title | escape }}"
                        required>

                    <label for="product-review-title">
                        {{- 'general.title' | t -}}
                    </label>

                </div>

                <div class="mb-4 form-floating">

                    <textarea
                        id="product-review-comment"
                        name="comment"
                        class="form-control"
                        placeholder="{{ 'product.write_review' | t }}"
                        value="{{ form.submitted.comment | escape }}"
                        required></textarea>

                    <label for="product-review-comment">
                        {{- 'product.write_review' | t -}}
                    </label>

                </div>

                <div class="mb-4 d-flex justify-content-between align-items-center">

                    <span class="h5 mb-0 text-title">
                        {{- 'product.review_grade' | t -}}
                    </span>

                    <fieldset class="product-review-rating ms-2">

                        <input
                            type="radio"
                            id="product-review-rating-5"
                            name="rating"
                            value="5"
                            {% if form.submitted.rating | escape == '5' %}checked{% endif %}>
                        <label for="product-review-rating-5" title="5">
                            {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                        </label>

                        <input
                            type="radio"
                            id="product-review-rating-4"
                            name="rating"
                            value="4"
                            {% if form.submitted.rating | escape == '4' %}checked{% endif %}>
                        <label for="product-review-rating-4" title="4">
                            {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                        </label>

                        <input
                            type="radio"
                            id="product-review-rating-3"
                            name="rating"
                            value="3"
                            {% if form.submitted.rating | escape == '3' %}checked{% endif %}>
                        <label for="product-review-rating-3" title="3">
                            {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                        </label>

                        <input
                            type="radio"
                            id="product-review-rating-2"
                            name="rating"
                            value="2"
                            {% if form.submitted.rating | escape == '2' %}checked{% endif %}>
                        <label for="product-review-rating-2" title="2">
                            {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                        </label>

                        <input
                            type="radio"
                            id="product-review-rating-1"
                            name="rating"
                            value="1"
                            {% if form.submitted.rating | escape == '1' %}checked{% endif %}>
                        <label for="product-review-rating-1" title="1">
                            {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                        </label>

                    </fieldset>

                </div>

                {% render 'form-error', error: form.error, class: 'mb-4' %}

                <div class="mb-4 text-end mb-0">

                    <button type="submit" class="btn btn-primary">{{ 'general.submit' | t }}</button>

                </div>

            {% endform %}

        </div>

    {% else %}

        {%- if section.settings.customDisplayInformation == true and section.settings.showManufacturer and product.manufacturer -%}
            {%- assign showManufacturer = true -%}
        {%- elsif settings.productShowManufacturer == true and product.manufacturer -%}
            {%- assign showManufacturer = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showPromotion and product.default_or_selected_variant.promotion -%}
            {%- assign showPromotion = true -%}
        {%- elsif settings.productShowPromotion == true and product.default_or_selected_variant.promotion -%}
            {%- assign showPromotion = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showNewBadge -%}
            {%- assign showNewBadge = true -%}
        {%- elsif settings.productShowNewBadge == true -%}
            {%- assign showNewBadge = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showPromotionBadge -%}
            {%- assign showPromotionBadge = true -%}
        {%- elsif settings.productShowPromotionBadge == true -%}
            {%- assign showPromotionBadge = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showDiscountBadge -%}
            {%- assign showDiscountBadge = true -%}
        {%- elsif settings.productShowDiscountBadge == true -%}
            {%- assign showDiscountBadge = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showOutOfStockBadge -%}
            {%- assign showOutOfStockBadge = true -%}
        {%- elsif settings.productShowOutOfStockBadge == true -%}
            {%- assign showOutOfStockBadge = true -%}
        {%- endif -%}

        {%- if section.settings.customDisplayInformation == true and section.settings.showStockBalance -%}
            {%- assign showStockBalance = true -%}
        {%- elsif settings.productShowStockBalance == true -%}
            {%- assign showStockBalance = true -%}
        {%- endif -%}

        {%- if settings.accessibilityShowWishlist and section.settings.showBuyNowButton and product.default_or_selected_variant.notifications_supported == false -%}
            {%- assign showWishlistCondition = true -%}
        {%- endif -%}

        {%- assign generalImages = product.images | where: 'attached_to_variant', false -%}
        
        <div class="product-container section-highlight-item section-highlight-item-md mb-md-8">

            <div class="row justify-content-between">

                <div class="col-12 col-md-6 col-xxl-7 pe-md-4 pe-xxl-8">

                    <div class="product-media-container">

                        <div class="product-media row g-0" data-dynamic-partial="media">

                            <div id="product-thumb-media-swiper" class="swiper swiper-vertical d-none d-lg-block w-px-80 me-g">

                                <div class="swiper-wrapper">

                                    {%- assign hasImg = false -%}
                                    {%- assign isFeaturedImgSelected = false -%}

                                    {% if settings.productImageAspectRatio == '9:13' %}
                                        {%- assign imgSize = '90,124' -%}
                                    {% elsif settings.productImageAspectRatio == '4:3' %}
                                        {%- assign imgSize = '90,71' -%}
                                    {% elsif settings.productImageAspectRatio == '3:4' %}
                                        {%- assign imgSize = '90,120' -%}
                                    {% elsif settings.productImageAspectRatio == '1:1' %}
                                        {%- assign imgSize = '90,90' -%}
                                    {% endif %}

                                    {% if product.default_or_selected_variant.image and product.has_only_default_variant == false %}

                                        {%- unless hasImg -%}
                                            {%- assign hasImg = true -%}
                                        {%- endunless -%}

                                        <div class="swiper-slide aspect-ratio-product">

                                            <div class="aspect-ratio-container">

                                                <img
                                                    class="lazy d-block mx-auto img-fluid aspect-ratio-item cursor-pointer{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                    alt="{{ product.title }}"
                                                    data-src="{{ product.default_or_selected_variant.image | thumb: imgSize }}"
                                                    data-srcset="{{ product.default_or_selected_variant.image | thumb: imgSize }} 1x, {{ product.default_or_selected_variant.image | thumb: imgSize | thumb: '@2x' }} 2x">

                                            </div>

                                        </div>

                                        {%- unless isFeaturedImgSelected -%}
                                            {%- assign isFeaturedImgSelected = true -%}
                                        {%- endunless -%}

                                    {% endif %}

                                    {% for image in generalImages %}

                                        {%- unless hasImg -%}
                                            {%- assign hasImg = true -%}
                                        {%- endunless -%}

                                        <div class="swiper-slide aspect-ratio-product">

                                            <div class="aspect-ratio-container">

                                                <img
                                                    class="lazy d-block mx-auto img-fluid aspect-ratio-item cursor-pointer{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                    alt="{{ product.title }}"
                                                    data-src="{{ image | thumb: imgSize }}"
                                                    data-srcset="{{ image | thumb: imgSize }} 1x, {{ image | thumb: imgSize | thumb: '@2x' }} 2x">

                                            </div>

                                        </div>

                                        {%- unless isFeaturedImgSelected -%}
                                            {%- assign isFeaturedImgSelected = true -%}
                                        {%- endunless -%}

                                    {% endfor %}

                                    {% if product.default_or_selected_variant.customizations.size > 0 %}

                                        {% for group in product.default_or_selected_variant.customizations %}

                                            {% for option in group.options %}

                                                {% if option.image %}

                                                    {%- unless hasImg -%}
                                                        {%- assign hasImg = true -%}
                                                    {%- endunless -%}

                                                    <div class="swiper-slide aspect-ratio-product" data-product-customization-image="{{ option.id }}">

                                                        <div class="aspect-ratio-container">

                                                            <img
                                                                class="lazy d-block mx-auto img-fluid aspect-ratio-item cursor-pointer{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                                alt="{{ product.title }}"
                                                                data-src="{{ option.image | thumb: imgSize }}"
                                                                data-srcset="{{ option.image | thumb: imgSize }} 1x, {{ option.image | thumb: imgSize | thumb: '@2x' }} 2x">

                                                        </div>

                                                    </div>

                                                    {%- unless isFeaturedImgSelected -%}
                                                        {%- assign isFeaturedImgSelected = true -%}
                                                    {%- endunless -%}

                                                {% endif %}

                                                {% if option.child_group %}

                                                    {% for option in option.child_group.options %}

                                                        {% if option.image %}

                                                            {%- unless hasImg -%}
                                                                {%- assign hasImg = true -%}
                                                            {%- endunless -%}

                                                            <div class="swiper-slide aspect-ratio-product" data-product-customization-image="{{ option.id }}">

                                                                <div class="aspect-ratio-container">

                                                                    <img
                                                                        class="lazy d-block mx-auto img-fluid aspect-ratio-item cursor-pointer{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                                        alt="{{ product.title }}"
                                                                        data-src="{{ option.image | thumb: imgSize }}"
                                                                        data-srcset="{{ option.image | thumb: imgSize }} 1x, {{ option.image | thumb: imgSize | thumb: '@2x' }} 2x">

                                                                </div>

                                                            </div>

                                                            {%- unless isFeaturedImgSelected -%}
                                                                {%- assign isFeaturedImgSelected = true -%}
                                                            {%- endunless -%}

                                                        {% endif %}

                                                    {% endfor %}

                                                {% endif %}

                                            {% endfor %}

                                        {% endfor %}

                                    {% endif %}

                                    {% unless hasImg %}

                                        <div class="swiper-slide aspect-ratio-product">

                                            <div class="aspect-ratio-container">

                                                {%- capture imgSrc -%}
                                                    {% render 'placeholder-svg', type: 'image', base64: true %}
                                                {%- endcapture -%}

                                                <img
                                                    class="lazy d-block mx-auto img-fluid aspect-ratio-item cursor-pointer svg-placeholder"
                                                    alt="{{ product.title }}"
                                                    data-src="{{ imgSrc }}">

                                            </div>

                                        </div>

                                    {% endunless %}

                                    {% for video in product.videos %}

                                        <div class="swiper-slide aspect-ratio-product">

                                            <div class="aspect-ratio-container">

                                                {% if video.thumb %}

                                                    <img
                                                        class="lazy d-block mx-auto img-fluid cursor-pointer aspect-ratio-item"
                                                        alt="{{ product.title }}"
                                                        data-src="{{ video.thumb | thumb: imgSize }}"
                                                        data-srcset="{{ video.thumb | thumb: imgSize }} 1x, {{ video.thumb | thumb: imgSize | thumb: '@2x' }} 2x">

                                                {% else %}

                                                    {%- capture imgSrc -%}
                                                        {% render 'placeholder-svg', type: 'image', base64: true %}
                                                    {%- endcapture -%}

                                                    <img
                                                        class="lazy d-block mx-auto img-fluid cursor-pointer aspect-ratio-item svg-placeholder"
                                                        alt="{{ product.title }}"
                                                        data-src="{{ imgSrc }}">

                                                {% endif %}

                                            </div>

                                        </div>

                                    {% endfor %}

                                </div>

                                {% if product.media.size %}

                                    <div class="swiper-button-prev">
                                        {%- render 'icon', icon: 'angle-left' -%}
                                    </div>

                                    <div class="swiper-button-next">
                                        {%- render 'icon', icon: 'angle-right' -%}
                                    </div>

                                {% endif %}

                            </div>

                            <div id="product-main-media-swiper" class="swiper swiper-navigation-hide-on-desktop gallery col">

                                {% render 'product-badges', product: product, showNew: showNewBadge, showPromotion: showPromotionBadge, showDiscount: showDiscountBadge, showOutOfStock: showOutOfStockBadge %}

                                <div class="swiper-wrapper">

                                    {%- assign hasImg = false -%}
                                    {%- assign isFeaturedImgSelected = false -%}

                                    {% if settings.productImageAspectRatio == '9:13' %}

                                        {%- assign imgSizeSm = '530,766' -%}
                                        {%- assign imgSizeMd = '449,649' -%}
                                        {%- assign imgSizeLg = '607,877' -%}

                                    {% elsif settings.productImageAspectRatio == '4:3' %}

                                        {%- assign imgSizeSm = '530,398' -%}
                                        {%- assign imgSizeMd = '449,337' -%}
                                        {%- assign imgSizeLg = '607,455' -%}

                                    {% elsif settings.productImageAspectRatio == '3:4' %}

                                        {%- assign imgSizeSm = '530,707' -%}
                                        {%- assign imgSizeMd = '449,599' -%}
                                        {%- assign imgSizeLg = '607,809' -%}

                                    {% elsif settings.productImageAspectRatio == '1:1' %}

                                        {%- assign imgSizeSm = '530,530' -%}
                                        {%- assign imgSizeMd = '449,449' -%}
                                        {%- assign imgSizeLg = '607,607' -%}

                                    {% endif %}

                                    {% if product.default_or_selected_variant.image and product.has_only_default_variant == false %}

                                        {%- unless hasImg -%}
                                            {%- assign hasImg = true -%}
                                        {%- endunless -%}

                                        <div class="swiper-slide gallery-item aspect-ratio-product">

                                            <div class="product-media-img-container aspect-ratio-container" data-gallery-init>

                                                <picture>
                                                    <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeLg }} 1x,
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                    <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeMd }} 1x,
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                    <source data-srcset="
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeSm }} 1x,
                                                        {{- product.default_or_selected_variant.image | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                    <img
                                                        class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                        alt="{{ product.title }}"
                                                        data-gallery-img-src="{{ product.default_or_selected_variant.image }}"
                                                        src="{{ product.default_or_selected_variant.image | thumb: imgSizeSm }}">
                                                </picture>

                                            </div>

                                        </div>

                                        {%- unless isFeaturedImgSelected -%}
                                            {%- assign isFeaturedImgSelected = true -%}
                                        {%- endunless -%}

                                    {% endif %}

                                    {% for image in generalImages %}

                                        {%- unless hasImg -%}
                                            {%- assign hasImg = true -%}
                                        {%- endunless -%}

                                        <div class="swiper-slide gallery-item aspect-ratio-product">

                                            <div class="product-media-img-container aspect-ratio-container" data-gallery-init>

                                                <picture>
                                                    <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                        {{- image | thumb: imgSizeLg }} 1x,
                                                        {{- image | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                    <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                        {{- image | thumb: imgSizeMd }} 1x,
                                                        {{- image | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                    <source data-srcset="
                                                        {{- image | thumb: imgSizeSm }} 1x,
                                                        {{- image | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                    <img
                                                        class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                        alt="{{ product.title }}"
                                                        data-gallery-img-src="{{ image }}"
                                                        src="{{ image | thumb: imgSizeSm }}">
                                                </picture>

                                            </div>

                                        </div>

                                        {%- unless isFeaturedImgSelected -%}
                                            {%- assign isFeaturedImgSelected = true -%}
                                        {%- endunless -%}

                                    {% endfor %}

                                    {% if product.default_or_selected_variant.customizations.size > 0 %}

                                        {% for group in product.default_or_selected_variant.customizations %}

                                            {% for option in group.options %}

                                                {% if option.image %}

                                                    {%- unless hasImg -%}
                                                        {%- assign hasImg = true -%}
                                                    {%- endunless -%}

                                                    <div class="swiper-slide gallery-item aspect-ratio-product" data-product-customization-image="{{ option.id }}">

                                                        <div class="product-media-img-container aspect-ratio-container" data-gallery-init>

                                                            <picture>
                                                                <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                                    {{- option.image | thumb: imgSizeLg }} 1x,
                                                                    {{- option.image | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                                <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                                    {{- option.image | thumb: imgSizeMd }} 1x,
                                                                    {{- option.image | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                                <source data-srcset="
                                                                    {{- option.image | thumb: imgSizeSm }} 1x,
                                                                    {{- option.image | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                                <img
                                                                    class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                                    alt="{{ product.title }}"
                                                                    data-gallery-img-src="{{ option.image }}"
                                                                    src="{{ option.image | thumb: imgSizeSm }}">
                                                            </picture>

                                                        </div>

                                                    </div>

                                                    {%- unless isFeaturedImgSelected -%}
                                                        {%- assign isFeaturedImgSelected = true -%}
                                                    {%- endunless -%}

                                                {% endif %}

                                                {% if option.child_group %}

                                                    {% for option in option.child_group.options %}

                                                        {% if option.image %}

                                                            {%- unless hasImg -%}
                                                                {%- assign hasImg = true -%}
                                                            {%- endunless -%}

                                                            <div class="swiper-slide gallery-item aspect-ratio-product" data-product-customization-image="{{ option.id }}">

                                                                <div class="product-media-img-container aspect-ratio-container" data-gallery-init>

                                                                    <picture>
                                                                        <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                                            {{- option.image | thumb: imgSizeLg }} 1x,
                                                                            {{- option.image | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                                        <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                                            {{- option.image | thumb: imgSizeMd }} 1x,
                                                                            {{- option.image | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                                        <source data-srcset="
                                                                            {{- option.image | thumb: imgSizeSm }} 1x,
                                                                            {{- option.image | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                                        <img
                                                                            class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}{% unless isFeaturedImgSelected %} featured-img{% endunless %}"
                                                                            alt="{{ product.title }}"
                                                                            data-gallery-img-src="{{ option.image }}"
                                                                            src="{{ option.image | thumb: imgSizeSm }}">
                                                                    </picture>

                                                                </div>

                                                            </div>

                                                            {%- unless isFeaturedImgSelected -%}
                                                                {%- assign isFeaturedImgSelected = true -%}
                                                            {%- endunless -%}

                                                        {% endif %}

                                                    {% endfor %}

                                                {% endif %}

                                            {% endfor %}

                                        {% endfor %}

                                    {% endif %}

                                    {% unless hasImg %}

                                        <div class="swiper-slide gallery-item aspect-ratio-product">

                                            <div class="product-media-img-container aspect-ratio-container" data-gallery-init>

                                                {%- capture imgSrc -%}
                                                    {% render 'placeholder-svg', type: 'image', base64: true %}
                                                {%- endcapture -%}

                                                <img
                                                    class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in svg-placeholder{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}"
                                                    alt="{{ product.title }}"
                                                    data-gallery-img-src="{{ imgSrc }}"
                                                    data-src="{{ imgSrc }}">

                                            </div>

                                        </div>

                                    {% endunless %}

                                    {% for video in product.videos %}

                                        {%- capture iframeSrc -%}
                                            {%- if video.youtube_id -%}
                                                https://www.youtube.com/embed/{{ video.youtube_id -}}
                                            {%- elsif video.vimeo_id -%}
                                                https://player.vimeo.com/video/{{ video.vimeo_id -}}
                                            {%- else -%}
                                                {{- video -}}
                                            {%- endif -%}
                                        {%- endcapture -%}

                                        <div class="swiper-slide gallery-item">

                                            <div class="aspect-ratio-product">

                                                <div class="product-media-video-container aspect-ratio-container" data-gallery-init>

                                                    {% if video.thumb %}

                                                        <div class="product-media-video-icon-container cursor-zoom-in">
                                                            {%- render 'icon', icon: 'play', class: 'svg-icon-fw product-media-video-icon' -%}
                                                        </div>

                                                        <picture>
                                                            <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                                {{- video.thumb | thumb: imgSizeLg }} 1x,
                                                                {{- video.thumb | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                            <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                                {{- video.thumb | thumb: imgSizeMd }} 1x,
                                                                {{- video.thumb | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                            <source data-srcset="
                                                                {{- video.thumb | thumb: imgSizeSm }} 1x,
                                                                {{- video.thumb | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                            <img
                                                                class="lazy lazy-disable-transition d-block mx-auto img-fluid aspect-ratio-item cursor-zoom-in{% if settings.productImageAspectRatio == '9:13' or settings.productImageAspectRatio == '3:4' %} aspect-ratio-item-position-top{% endif %}"
                                                                alt="{{ product.title }}"
                                                                data-gallery-iframe-src="{{ iframeSrc | strip | replace: '  ', '' | strip_newlines }}"
                                                                src="{{ video.thumb | thumb: imgSizeSm }}">
                                                        </picture>

                                                    {% else %}

                                                        {%- capture imgSrc -%}
                                                            {% render 'placeholder-svg', type: 'image', base64: true %}
                                                        {%- endcapture -%}

                                                        <img
                                                            class="lazy lazy-disable-transition d-block mx-auto img-fluid svg-placeholder"
                                                            alt="{{ product.title }}"
                                                            data-src="{{ imgSrc }}"
                                                            data-gallery-iframe-src="{{ iframeSrc | strip | replace: '  ', '' | strip_newlines }}"
                                                            data-srcset="{{ imgSrc }}">

                                                    {% endif %}

                                                </div>

                                            </div>

                                        </div>

                                    {% endfor %}

                                </div>

                                {% if product.media.size %}
                                
                                <div class="swiper-button-prev">
                                        {%- render 'icon', icon: 'angle-left' -%}
                                    </div>

                                    <div class="swiper-button-next">
                                        {%- render 'icon', icon: 'angle-right' -%}
                                    </div>

                                    <div class="swiper-pagination swiper-pagination-relative d-md-none"></div>

                                {% endif %}   

                            </div>

                        </div>

                    </div>

                </div>

                <div class="col-12 col-md-6 col-xxl-5 product-info-container" data-aos="{{ settings.sectionAnimation }}" data-aos-anchor="#finqu-section-{{ section.id }}">

                    <div class="product-info mt-4 mt-md-0" data-dynamic-partial="info">

                        {% if showManufacturer %}

                            <div class="product-manufacturer mb-1">

                                <a href="{{ product.manufacturer | link }}" class="product-manufacturer-text">
                                    {{ product.manufacturer.title }}
                                </a>

                            </div>

                        {% endif %}

                        <div class="product-name">

                            <h1 class="product-name-text text-product-title">
                                {{ product.title }}
                            </h1>

                        </div>

                        {% if product.default_or_selected_variant.in_preview == false %}

                            {% if store.customer_has_purchase_right %}

                                <div class="product-pricing mt-2 mb-4">

                                    {% if showPromotion %}

                                        <div class="product-promotion mb-2">

                                            <span class="text-sale-price">
                                                {{ product.default_or_selected_variant.promotion.title | strip }}{% if product.default_or_selected_variant.promotion.description %}: {{ product.default_or_selected_variant.promotion.description }}{% endif %}
                                            </span>

                                        </div>

                                    {% endif %}

                                    <div class="d-flex justify-content-between">

                                        <div class="d-flex product-price-container flex-wrap column-gap-3 row-gap-2">

                                            {% if product.default_or_selected_variant.price != product.default_or_selected_variant.original_price %}

                                                <span class="product-sale-price-text text-sale-price" data-product-price-dynamic>
                                                    {{- settings.taxFreeShopping == true | yepnope: product.default_or_selected_variant.net_price, product.default_or_selected_variant.price | money_with_currency -}}
                                                </span>

                                                <span class="product-price text-decoration-line-through text-muted" data-product-original-price-dynamic>
                                                    {{- settings.taxFreeShopping == true | yepnope: product.default_or_selected_variant.original_net_price, product.default_or_selected_variant.original_price | money_with_currency -}}
                                                </span>

                                            {% else %}

                                                <span class="product-price text-price" data-product-price-dynamic>
                                                    {{- settings.taxFreeShopping == true | yepnope: product.default_or_selected_variant.net_price, product.default_or_selected_variant.price | money_with_currency -}}
                                                </span>

                                            {% endif %}

                                        </div>

                                        {% if product.review_count > 0 and product.reviews_are_enabled %}

                                            <div class="product-review-rating">

                                                <button
                                                    type="button"
                                                    id="product-show-reviews"
                                                    class="btn btn-text">

                                                    {%- render 'icon', icon: 'rating', class: 'text-review-icon' -%}

                                                    <span class="product-review-text">
                                                        {{ product.rating }}
                                                    </span>

                                                </button>

                                            </div>

                                        {% endif %}

                                    </div>

                                    {% if section.settings.showLowestPrice and product.default_or_selected_variant.previous_lower_price and product.default_or_selected_variant.price != product.default_or_selected_variant.original_price %}

                                        {% assign itemLowestPrice = settings.taxFreeShopping == true | yepnope: product.default_or_selected_variant.previous_lower_price.net_price, product.default_or_selected_variant.previous_lower_price.price | money_with_currency %}

                                        <div class="product-lowest-price mt-2">
                                            {{- 'product.lowest_price_dynamic' | t, amount: itemLowestPrice -}}
                                        </div>

                                    {% endif %}

                                    <div class="product-vat mt-1">

                                        {% assign itemTaxPercent = settings.taxFreeShopping == true | yepnope: 0, product.default_or_selected_variant.rate %}

                                        <span class="product-vat-text text-muted">
                                            {{- 'product.vat_included_dynamic' | t, amount: itemTaxPercent -}}
                                        </span>

                                    </div>

                                </div>

                            {% endif %}

                            {% if store.customer_has_purchase_right and showStockBalance %}

                                <div class="mb-4">

                                    {%- if product.default_or_selected_variant.is_out_of_stock -%}

                                        <span class="product-stock-balance-out-of-stock">
                                            {{- 'product.out_of_stock' | t -}}
                                        </span>

                                    {%- elsif product.default_or_selected_variant.is_low_on_stock and product.default_or_selected_variant.stock and product.default_or_selected_variant.inventory_policy == 'deny' -%}

                                        <span class="product-stock-balance-low-on-stock">
                                            {{- 'product.low_on_stock_dynamic' | t: amount: product.default_or_selected_variant.stock -}}
                                        </span>

                                    {%- else -%}

                                        <span class="product-stock-balance-in-stock">
                                            {{- 'product.in_stock' | t -}}
                                        </span>

                                    {%- endif -%}

                                </div>

                            {% endif %}

                            {% if store.customer_has_purchase_right %}

                                {% if product.is_available or product.default_or_selected_variant.notifications_supported %}

                                    <div class="product-form mt-4">

                                        {% form 'product', product %}

                                            {% unless section.settings.showQuantitySelect %}
                                                <input
                                                    type="hidden"
                                                    name="quantity"
                                                    value="{{ product.min_quantity }}">
                                            {% endunless %}

                                            {% if section.settings.showRelatedProductsAsOptions and product.related.size > 0 or product.combined_listing.options_with_values.size > 0 %}

                                                <div class="product-combined">

                                                    {% render 'product-combined-options', product: product, showAsDropdown: section.settings.showVariantSelectionAsDropdown, showRelatedProductsAsOptions: section.settings.showRelatedProductsAsOptions %}

                                                </div>

                                            {% endif %}

                                            {% unless product.has_only_default_variant %}

                                                <div class="product-variants">

                                                    {% render 'product-variant-options', product: product, showAsDropdown: section.settings.showVariantSelectionAsDropdown %}

                                                </div>

                                            {% endunless %}

                                            {% if product.default_or_selected_variant.customizations.size > 0 %}

                                                <div class="product-customizations">

                                                    {% assign showCustomizationPrice = section.settings.showProductCustomizationPrice %}
                                                    {% assign showCustomizationTotalPrice = section.settings.showProductCustomizationTotalPrice %}
                                                    {% assign showCustomizationStockBalance = section.settings.showProductCustomizationStockBalance %}
                                                    {% assign showSimpleInputs = section.settings.showSimpleProductCustomizationInputElements %}
                                                    {% assign inventoryPolicy = product.default_or_selected_variant.inventory_policy %}
                                                    {% assign isPreviewProduct = product.in_preview %}
                                                    {% assign unit = product.default_or_selected_variant.unit %}

                                                    {% for group in product.default_or_selected_variant.customizations %}

                                                        {%- if group.input_type == 'select' -%}

                                                            {% render 'product-customizations/select', group: group, showCustomizationPrice: showCustomizationPrice, showCustomizationTotalPrice: showCustomizationTotalPrice, showCustomizationStockBalance: showCustomizationStockBalance, inventoryPolicy: inventoryPolicy, isPreviewProduct: isPreviewProduct, unit: unit %}

                                                        {%- elsif group.input_type == 'radio' -%}

                                                            {% render 'product-customizations/radio', group: group, showCustomizationPrice: showCustomizationPrice, showCustomizationTotalPrice: showCustomizationTotalPrice, showCustomizationStockBalance: showCustomizationStockBalance, inventoryPolicy: inventoryPolicy, isPreviewProduct: isPreviewProduct, unit: unit, simpleInputs: showSimpleInputs %}

                                                        {%- elsif group.input_type == 'checkbox' -%}

                                                            {% render 'product-customizations/checkbox', group: group, showCustomizationPrice: showCustomizationPrice, showCustomizationTotalPrice: showCustomizationTotalPrice, showCustomizationStockBalance: showCustomizationStockBalance, inventoryPolicy: inventoryPolicy, isPreviewProduct: isPreviewProduct, unit: unit, simpleInputs: showSimpleInputs %}

                                                        {%- elsif group.input_type == 'text' -%}

                                                            {% render 'product-customizations/text', group: group, showCustomizationPrice: showCustomizationPrice, showCustomizationTotalPrice: showCustomizationTotalPrice, showCustomizationStockBalance: showCustomizationStockBalance, inventoryPolicy: inventoryPolicy, isPreviewProduct: isPreviewProduct, unit: unit %}

                                                        {%- endif -%}

                                                    {% endfor %}

                                                </div>

                                            {% endif %}

                                            {% if product.default_or_selected_variant.notifications_supported and product.default_or_selected_variant.is_out_of_stock %}

                                                <div class="product-availability-notification d-flex mt-5">

                                                    <button
                                                        type="button"
                                                        class="btn btn-primary d-block w-100"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#availability-notification-modal">
                                                        {{- 'product.availability_notification.modal_cta' | t -}}
                                                    </button>

                                                    {% if settings.accessibilityShowWishlist %}

                                                        <button
                                                            type="button"
                                                            class="btn btn-text ms-1 btn btn-text p-2 product-wishlist-action bordered"
                                                            data-wishlist-toggle="{{ product.default_or_selected_variant.product_id }}"
                                                            aria-pressed="{{ product.in_customers_wishlist | yepnope: 'true', 'false' }}"
                                                            aria-label="{{ product.in_customers_wishlist | yepnope: 'wishlist.remove', 'wishlist.add' | t }}">
                                                            {%- render 'icon', icon: 'like', class: 'svg-icon-lg svg-icon-fw' -%}
                                                        </button>

                                                    {% endif %}

                                                </div>

                                            {% else %}

                                                {% if section.settings.showQuantitySelect %}

                                                    <div class="product-quantity-container mb-4">

                                                        <label for="product-quantity-input" class="form-label">
                                                            {{- 'general.quantity' | t -}}
                                                        </label>

                                                        <div class="product-inline-quantity max-w-px-120 min-h-px-40">

                                                            <button type="button" class="btn btn-text product-quantity-decrease" aria-label="{{ 'general.decrease' | t }}">
                                                                {%- render 'icon', icon: 'subtract' -%}
                                                            </button>

                                                            <input
                                                                type="text"
                                                                inputmode="numeric"
                                                                id="product-quantity-input"
                                                                name="quantity"
                                                                class="product-quantity-input"
                                                                value="{{ product.min_quantity }}"
                                                                min="{% if product.min_quantity %}{{ product.min_quantity }}{% else %}1{% endif %}"
                                                                {% if product.max_quantity %}max="{{ product.max_quantity }}"{% endif %}pattern="[0-9]{1,3}">

                                                            <button type="button" class="btn btn-text product-quantity-increase" aria-label="{{ 'general.increase' | t }}">
                                                                {%- render 'icon', icon: 'add' -%}
                                                            </button>

                                                        </div>

                                                    </div>

                                                {% endif %}

                                                <div class="product-action-add-to-cart d-flex mt-5">

                                                    <button
                                                        type="button"
                                                        class="btn {{ section.settings.showBuyNowButton | yepnope: 'btn-secondary', 'btn-primary' }} d-block w-100"
                                                        data-cart-add
                                                        data-cart-form>
                                                        {{- 'cart.add' | t -}}
                                                    </button>

                                                {% if settings.accessibilityShowWishlist and section.settings.showBuyNowButton == false %}

                                                        <button
                                                            type="button"
                                                            class="btn btn-text ms-1 btn btn-text p-2 product-wishlist-action bordered"
                                                            data-wishlist-toggle="{{ product.default_or_selected_variant.product_id }}"
                                                            aria-pressed="{{ product.in_customers_wishlist | yepnope: 'true', 'false' }}"
                                                            aria-label="{{ product.in_customers_wishlist | yepnope: 'wishlist.remove', 'wishlist.add' | t }}">
                                                            {%- render 'icon', icon: 'like', class: 'svg-icon-lg svg-icon-fw' -%}
                                                        </button>

                                                    {% endif %}

                                                </div>

                                                {% if section.settings.showBuyNowButton %}

                                                    <div class="product-action-buy-now d-flex mt-2">

                                                        <button
                                                            type="button"
                                                            class="btn btn-primary d-block w-100"
                                                            data-cart-add
                                                            data-cart-checkout
                                                            data-cart-form>
                                                            {{- 'cart.buy_now' | t -}}
                                                        </button>

                                                    </div>

                                                    {% if product.default_or_selected_variant.additional_buy_buttons %}

                                                        <div class="product-action-additonal-buy-now d-flex mt-2">

                                                        {{ product.default_or_selected_variant.content_for_additional_buy_buttons }}

                                                        </div>

                                                    {% endif %}

                                                {% endif %}

                                            {% endif %}

                                            {% render 'form-error', error: form.error, class: 'mt-4' %}

                                            {% if product.default_or_selected_variant.financing_offers %}

                                                <div class="mt-3">
                                                    {{ product.default_or_selected_variant.content_for_financing_offers }}
                                                </div>

                                            {% endif %}

                                            {% if section.settings.showProductQuestionForm or product.size_chart or showWishlistCondition %}

                                                <div class="d-flex justify-content-between justify-content-md-start gap-g mt-3">

                                                    {% if section.settings.showProductQuestionForm %}

                                                        <button
                                                            type="button"
                                                            class="btn btn-text text-underline-indicator"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#product-question-modal">

                                                            {%- render 'icon', icon: 'question', class: 'svg-icon-lg svg-icon-fw' -%}

                                                            <span>
                                                                {{- 'product.question.modal_cta' | t -}}
                                                            </span>

                                                        </button>

                                                    {% endif %}

                                                    {% if product.size_chart %}

                                                        <button
                                                            type="button"
                                                            class="btn btn-text text-underline-indicator"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#product-size-chart-modal">

                                                            {%- render 'icon', icon: 'size-chart', class: 'svg-icon-lg svg-icon-fw' -%}

                                                            <span>
                                                                {{- 'product.size_chart.modal_cta' | t -}}
                                                            </span>

                                                        </button>

                                                    {% endif %}

                                                    {% if settings.accessibilityShowWishlist and section.settings.showBuyNowButton and product.default_or_selected_variant.notifications_supported == false %}

                                                        <button
                                                            type="button"
                                                            class="btn btn-text text-underline-indicator product-wishlist-action"
                                                            data-wishlist-toggle="{{ product.default_or_selected_variant.product_id }}"
                                                            aria-pressed="{{ product.in_customers_wishlist | yepnope: 'true', 'false' }}">
                                                            
                                                                {%- render 'icon', icon: 'like', class: 'svg-icon-lg svg-icon-fw' -%}
                                                                
                                                                <span class="text pe-none">

                                                                    {%- if product.in_customers_wishlist -%}
                                                                        {{- 'wishlist.remove' | t -}}
                                                                    {%- else -%}
                                                                        {{- 'wishlist.add' | t -}}
                                                                    {%- endif -%}

                                                                </span>

                                                        </button>

                                                    {% endif %}

                                                </div>

                                            {% endif %}

                                        {% endform %}

                                    </div>

                                {% else %}

                                <div class="product-form mt-4">

                                        {% if product.default_or_selected_variant.notifications_supported %}

                                            <div class="product-availability-notification d-flex">

                                                <button
                                                    type="button"
                                                    class="btn btn-primary d-block w-100"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#availability-notification-modal">
                                                    {{- 'product.availability_notification.modal_cta' | t -}}
                                                </button>

                                                {% if settings.accessibilityShowWishlist %}

                                                    <button
                                                        type="button"
                                                        class="btn btn-text ms-1 btn btn-text p-2 product-wishlist-action bordered"
                                                        data-wishlist-toggle="{{ product.default_or_selected_variant.product_id }}"
                                                        aria-pressed="{{ product.in_customers_wishlist | yepnope: 'true', 'false' }}"
                                                        aria-label="{{ product.in_customers_wishlist | yepnope: 'wishlist.remove', 'wishlist.add' | t }}">
                                                        {%- render 'icon', icon: 'like', class: 'svg-icon-lg svg-icon-fw' -%}
                                                    </button>

                                                {% endif %}

                                            </div>

                                        {% else %}

                                            <div class="product-info-out-of-stock">

                                                <span class="product-info-out-of-stock-text btn btn-primary d-block w-100 disabled">
                                                    {{- 'product.out_of_stock' | t -}}
                                                </span>

                                            </div>

                                        {% endif %}

                                        {% if section.settings.showProductQuestionForm or product.size_chart or showWishlistCondition %}

                                            <div class="d-flex justify-content-between justify-content-md-start gap-g mt-3">

                                                {% if section.settings.showProductQuestionForm %}

                                                    <button
                                                        type="button"
                                                        class="btn btn-text text-underline-indicator"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#product-question-modal">

                                                        {%- render 'icon', icon: 'question', class: 'svg-icon-lg svg-icon-fw' -%}

                                                        <span>
                                                            {{- 'product.question.modal_cta' | t -}}
                                                        </span>

                                                    </button>

                                                {% endif %}

                                                {% if product.size_chart %}

                                                    <button
                                                        type="button"
                                                        class="btn btn-text text-underline-indicator"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#product-size-chart-modal">

                                                        {%- render 'icon', icon: 'size-chart', class: 'svg-icon-lg svg-icon-fw' -%}

                                                        <span>
                                                            {{- 'product.size_chart.modal_cta' | t -}}
                                                        </span>

                                                    </button>

                                                {% endif %}

                                                {% if settings.accessibilityShowWishlist and product.default_or_selected_variant.notifications_supported == false %}

                                                    <button
                                                        type="button"
                                                        class="btn btn-text text-underline-indicator product-wishlist-action"
                                                        data-wishlist-toggle="{{ product.default_or_selected_variant.product_id }}"
                                                        aria-pressed="{{ product.in_customers_wishlist | yepnope: 'true', 'false' }}">
                                                        
                                                            {%- render 'icon', icon: 'like', class: 'svg-icon-lg svg-icon-fw' -%}
                                                            
                                                            <span class="text pe-none">

                                                                {%- if product.in_customers_wishlist -%}
                                                                    {{- 'wishlist.remove' | t -}}
                                                                {%- else -%}
                                                                    {{- 'wishlist.add' | t -}}
                                                                {%- endif -%}

                                                            </span>

                                                    </button>

                                                {% endif %}

                                            </div>

                                        {% endif %}

                                    </div>

                                {% endif %}

                            {% endif %}

                        {%-endif %}

                        {% if product.short_description %}

                            <div class="product-short-description mt-4">

                                <span>{{ product.short_description }}</span>

                            </div>

                        {% endif %}

                        {% if product.default_or_selected_variant.sku or product.default_or_selected_variant.product_number or product.default_or_selected_variant.gtin %}

                            <div class="d-grid gap-1 mt-4">

                                {% if product.default_or_selected_variant.sku %}

                                    <div class="d-flex">

                                        <span>
                                            {{- 'product.sku_number' | t -}}:
                                        </span>

                                        <span class="ms-2">
                                            {{- product.default_or_selected_variant.sku -}}
                                        </span>

                                    </div>

                                {% endif %}

                                {% if product.default_or_selected_variant.product_number %}

                                    <div class="d-flex">

                                        <span>
                                            {{- 'product.model_number' | t -}}:
                                        </span>

                                        <span class="ms-2">
                                            {{- product.default_or_selected_variant.product_number -}}
                                        </span>

                                    </div>

                                {% endif %}

                                {% if product.default_or_selected_variant.gtin %}

                                    <div class="d-flex">

                                        <span>
                                            {{- 'product.product_identifier' | t -}}:
                                        </span>

                                        <span class="ms-2">
                                            {{- product.default_or_selected_variant.gtin -}}
                                        </span>

                                    </div>

                                {% endif %}

                            </div>

                        {% endif %}

                        {% if product.default_or_selected_variant.in_preview == false -%}

                            {% if product.default_or_selected_variant.bulk_rates %}

                                <div class="product-bulk-discounts mt-4">

                                    <div class="product-bulk-discount-header row g-0">

                                        <div class="col-6">

                                            <span class="product-bulk-discount-info-text">
                                                {{- 'product.bulk_discount' | t -}}
                                            </span>

                                        </div>

                                        <div class="col-6">

                                            <span class="product-bulk-discount-info-text">
                                                {{- 'product.discount_rate' | t -}}
                                            </span>

                                        </div>

                                    </div>

                                    {% for rate in product.default_or_selected_variant.bulk_rates %}

                                        {% if rate.is_percentage %}

                                            <div class="product-bulk-discount-item row g-0">

                                                <div class="col-6">

                                                    <span class="product-bulk-discount-rate-quantity-text">
                                                        {% if rate.quantity > 1 %}+
                                                        {% endif %}
                                                        {{ rate.quantity }} {{ product.default_or_selected_variant.unit }}
                                                    </span>

                                                </div>

                                                <div class="col-6">

                                                    <span class="product-bulk-discount-rate-amount-text">
                                                        {{ rate.amount }} %
                                                    </span>

                                                </div>

                                            </div>

                                        {% endif %}

                                    {% endfor %}

                                </div>

                            {% endif %}

                            {%- if product.default_or_selected_variant.deliverytime and product.default_or_selected_variant.deliverytime.max.days > 0 or section.settings.detailsFreeShippingLimit -%}
                                {%- assign showDelivery = true -%}
                            {%- endif -%}

                            {% if showDelivery or product.return_policy_time_limit %}

                                <hr>

                            {% endif %}

                            {% if showDelivery %}

                                <div class="product-delivery d-flex align-items-center mt-2 text-title">

                                    {% if product.default_or_selected_variant.deliverytime and product.default_or_selected_variant.deliverytime.max.days > 0 %}

                                        {%- render 'icon', icon: 'delivery-time', class: 'svg-icon-fw svg-icon-lg' -%}

                                    {% else %}

                                        {%- render 'icon', icon: 'delivery', class: 'svg-icon-fw svg-icon-lg' -%}

                                    {% endif %}

                                    <div class="ms-3">

                                        {% if product.default_or_selected_variant.deliverytime and product.default_or_selected_variant.deliverytime.max.days > 0 %}

                                            <span class="d-block">
                                                {{- 'product.delivery_time_dynamic' | t: min_days: product.default_or_selected_variant.deliverytime.min.days, max_days: product.default_or_selected_variant.deliverytime.max.days -}}
                                            </span>

                                        {% endif %}

                                        {% if section.settings.detailsFreeShippingLimit %}

                                            {%- assign amountWithCurrency = section.settings.detailsFreeShippingLimit | money_with_currency -%}

                                            <span{% if product.default_or_selected_variant.deliverytime and product.default_or_selected_variant.deliverytime.max.days > 0 %} class="d-block fw-bold"{% endif %}>
                                                {{ 'product.free_shipping_dynamic' | t: amount: amountWithCurrency -}}
                                            </span>

                                        {% endif %}

                                    </div>

                                </div>

                            {% endif %}

                            {% if product.return_policy_time_limit %}

                                <div class="product-return-time d-flex align-items-center mt-2 text-title">

                                    {%- render 'icon', icon: 'arrow-return', class: 'svg-icon-fw svg-icon-lg' -%}

                                    <span class="ms-3">
                                        {{- 'product.return_time_dynamic' | t: days: product.return_policy_time_limit -}}
                                    </span>

                                </div>

                            {% endif %}

                        {% endif %}

                        {% if product.related.size > 0 %}

                            {% if settings.productImageAspectRatio == '9:13' %}
                                {%- assign imgSize = '79,108' -%}
                            {% elsif settings.productImageAspectRatio == '4:3' %}
                                {%- assign imgSize = '79,62' -%}
                            {% elsif settings.productImageAspectRatio == '3:4' %}
                                {%- assign imgSize = '79,105' -%}
                            {% elsif settings.productImageAspectRatio == '1:1' %}
                                {%- assign imgSize = '90,90' -%}
                            {% endif %}

                            <div class="product-related-items my-4">

                                <span class="d-block fw-bold fs-4 my-3 text-title">
                                    {{ 'product.related_products' | t }}
                                </span>

                                <div class="row gx-0 gy-g">

                                    {% for relatedItem in product.related %}

                                        {%- assign relatedItemImg = relatedItem.first_available_variant.image | default: relatedItem.image -%}

                                        <div class="d-flex align-items-center gap-g border-top pt-g">

                                            <a href="{{ relatedItem | link }}">

                                                <div class="aspect-ratio-product w-px-80">

                                                    <div class="aspect-ratio-container">

                                                        {% if relatedItemImg %}

                                                            <picture>
                                                                <img
                                                                    alt="{{ relatedItem.title }}"
                                                                    data-src="{{ relatedItemImg | thumb: imgSize }}"
                                                                    data-srcset="{{ relatedItemImg | thumb: imgSize }} 1x, {{ relatedItemImg | thumb: imgSize | thumb: '@2x' }} 2x"
                                                                    class="lazy d-block mx-auto img-fluid aspect-ratio-item">
                                                            </picture>

                                                        {% else %}

                                                            {%- capture imgSrc -%}
                                                                {% render 'placeholder-svg', type: 'image', base64: true %}
                                                            {%- endcapture -%}

                                                            <img
                                                                class="lazy d-block mx-auto img-fluid aspect-ratio-item svg-placeholder"
                                                                alt="{{ relatedItem.title }}"
                                                                data-src="{{ imgSrc }}">

                                                        {% endif %}

                                                    </div>

                                                </div>

                                            </a>

                                            <div class="text-break">

                                                <a href="{{ relatedItem | link }}" class="fw-bold d-block mt-3">
                                                    {{ relatedItem.title }}
                                                </a>

                                                {% if store.customer_has_purchase_right and relatedItem.default_or_selected_variant.in_preview == false %}

                                                    <div>

                                                        {% if relatedItem.default_or_selected_variant.price != relatedItem.default_or_selected_variant.original_price %}

                                                            <span class="text-sale-price me-1">
                                                                {{- settings.taxFreeShopping == true | yepnope: relatedItem.default_or_selected_variant.net_price, relatedItem.default_or_selected_variant.price | money_with_currency -}}
                                                            </span>

                                                            <span class="text-decoration-line-through text-muted" data-product-original-price-dynamic>
                                                                {{- settings.taxFreeShopping == true | yepnope: relatedItem.default_or_selected_variant.original_net_price, relatedItem.default_or_selected_variant.original_price | money_with_currency -}}
                                                            </span>

                                                        {% else %}

                                                            <span class="text-price">
                                                                {{- settings.taxFreeShopping == true | yepnope: relatedItem.default_or_selected_variant.net_price, relatedItem.default_or_selected_variant.price | money_with_currency -}}
                                                            </span>

                                                        {% endif %}
                                                        
                                                    </div>

                                                {% endif %}

                                            </div>

                                            {% if store.customer_has_purchase_right and relatedItem.is_directly_buyable %}

                                                <button
                                                    type="button"
                                                    class="btn btn-secondary btn-sm flex-shrink-0"
                                                    data-cart-add="{{ relatedItem.id }}"
                                                    data-cart-quantity="{{ relatedItem.min_quantity }}">
                                                    {{- 'cart.quick_add' | t -}}
                                                </button>

                                            {% else %}

                                                <a href="{{ relatedItem | link }}" class="btn btn-secondary btn-sm flex-shrink-0">
                                                    {{- 'general.product_view' | t -}}
                                                </a>

                                            {% endif %}

                                        </div>

                                    {% endfor %}

                                </div>

                            </div>

                        {% endif %}

                    </div>

                </div>

            </div>

            <div class="section-tabs section-tabs-fluid d-md-flex justify-content-md-center mt-7" data-aos="{{ settings.sectionAnimation }}" data-dynamic-partial="tabs">

                <div class="section-tabs-inner">

                    {% if product.description %}
                        {%- assign descriptionTitle = 'product.description' | t -%}
                        {%- render 'section-tab', sectionTab: descriptionTitle, sectionTabValue: 'description' -%}    
                    {% endif %}

                    {% if product.default_or_selected_variant.in_preview == false %}

                        {% if product.attachments.size %}
                            {%- assign attachmentsTitle = 'product.attachments' | t -%}
                            {%- render 'section-tab', sectionTab: attachmentsTitle, sectionTabValue: 'attachments' -%}    
                        {% endif %}

                        {% if product.reviews_are_enabled %}
                            {%- capture reviewsTitle -%}{{ 'product.reviews' | t }} ({{ product.review_count }}){%- endcapture -%}
                            {%- render 'section-tab', sectionTab: reviewsTitle, sectionTabValue: 'reviews' -%}    
                        {% endif %}

                    {% endif %}

                    {% if section.settings.detailsShippingAndReturnRichtext %}
                        {%- assign shippingAndReturnTitle = 'product.shipping_and_return' | t -%}
                        {%- render 'section-tab', sectionTab: shippingAndReturnTitle, sectionTabValue: 'shipping-and-return' -%}    
                    {% endif %}

                    {% if section.settings.detailsPaymentRichtext %}
                        {%- assign paymentTitle = 'product.payment' | t -%}
                        {%- render 'section-tab', sectionTab: paymentTitle, sectionTabValue: 'payment' -%}    
                    {% endif %}

                </div>

            </div>

            <div class="section-tabs-content-container mt-4 mb-7" data-dynamic-partial="tabs-content">

                {% if product.description %}

                    {%- capture sectionTabContent -%}

                        <div class="text-richtext" data-aos="{{ settings.sectionAnimation }}">
                            {{- product.description -}}
                        </div>

                    {%- endcapture -%}

                    {%- render 'section-tab-content', sectionTabContent: sectionTabContent -%}

                {% endif %}

                {% if product.default_or_selected_variant.in_preview == false %}

                    {% if product.attachments.size %}

                        {%- capture sectionTabContent -%}

                            {% for attachment in product.attachments %}

                                <div{% unless forloop.last == true %} class="mb-3"{% endunless %} data-aos="{{ settings.sectionAnimation }}" data-aos-delay style="--aos-order: {{ forloop.index }}">

                                    <a href="{{ attachment.href }}" class="d-flex align-items-center">

                                        {%- render 'icon', icon: 'download', class: 'svg-icon-fw' -%}

                                        <span>{{ attachment.name }}</span>
                                        
                                    </a>

                                </div>

                            {% endfor %}

                        {%- endcapture -%}

                        {%- render 'section-tab-content', sectionTabContent: sectionTabContent -%}

                    {% endif %}

                    {% if product.reviews_are_enabled %}

                        {%- capture sectionTabContent -%}

                            <div data-aos="{{ settings.sectionAnimation }}">

                                {% if product.customer_can_review %}

                                    <button id="product-review-create" class="btn btn-sm btn-secondary{% if submitted_form.id == 'product-review-form' and submitted_form.error %} d-none{% endif %}">
                                        {{- 'product.write_review' | t -}}
                                    </button>

                                    <div class="product-review-form{% unless submitted_form.id == 'product-review-form' and submitted_form.error %} d-none{% endunless %}">

                                        {% form 'review', product id: 'product-review-form' %}

                                            <div class="mb-4 form-floating">

                                                <input
                                                    name="name"
                                                    type="text"
                                                    id="product-review-name"
                                                    class="form-control"
                                                    placeholder="{{ 'general.name' | t }}"
                                                    value="{{ form.submitted.name | escape }}"
                                                    required>

                                                <label for="product-review-name">
                                                    {{- 'general.name' | t -}}
                                                </label>

                                            </div>

                                            <div class="mb-4 form-floating">

                                                <input
                                                    name="title"
                                                    type="text"
                                                    id="product-review-title"
                                                    class="form-control"
                                                    placeholder="{{ 'general.title' | t }}"
                                                    value="{{ form.submitted.title | escape }}"
                                                    required>

                                                <label for="product-review-title">
                                                    {{- 'general.title' | t -}}
                                                </label>

                                            </div>

                                            <div class="mb-4 form-floating">

                                                <textarea
                                                    id="product-review-comment"
                                                    name="comment"
                                                    class="form-control"
                                                    placeholder="{{ 'product.write_review' | t }}"
                                                    value="{{ form.submitted.comment | escape }}"
                                                    required></textarea>

                                                <label for="product-review-comment">
                                                    {{- 'product.write_review' | t -}}
                                                </label>

                                            </div>

                                            <div class="mb-4 d-flex justify-content-between align-items-center">

                                                <span class="h5 mb-0 text-title">
                                                    {{- 'product.review_grade' | t -}}
                                                </span>

                                                <fieldset class="product-review-rating ms-2">

                                                    <input
                                                        type="radio"
                                                        id="product-review-rating-5"
                                                        name="rating"
                                                        value="5"
                                                        {% if form.submitted.rating | escape == '5' %}checked{% endif %}>
                                                    <label for="product-review-rating-5" title="5">
                                                        {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                                                    </label>

                                                    <input
                                                        type="radio"
                                                        id="product-review-rating-4"
                                                        name="rating"
                                                        value="4"
                                                        {% if form.submitted.rating | escape == '4' %}checked{% endif %}>
                                                    <label for="product-review-rating-4" title="4">
                                                        {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                                                    </label>

                                                    <input
                                                        type="radio"
                                                        id="product-review-rating-3"
                                                        name="rating"
                                                        value="3"
                                                        {% if form.submitted.rating | escape == '3' %}checked{% endif %}>
                                                    <label for="product-review-rating-3" title="3">
                                                        {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                                                    </label>

                                                    <input
                                                        type="radio"
                                                        id="product-review-rating-2"
                                                        name="rating"
                                                        value="2"
                                                        {% if form.submitted.rating | escape == '2' %}checked{% endif %}>
                                                    <label for="product-review-rating-2" title="2">
                                                        {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                                                    </label>

                                                    <input
                                                        type="radio"
                                                        id="product-review-rating-1"
                                                        name="rating"
                                                        value="1"
                                                        {% if form.submitted.rating | escape == '1' %}checked{% endif %}>
                                                    <label for="product-review-rating-1" title="1">
                                                        {%- render 'icon', icon: 'rating', class: 'svg-icon-fill' -%}
                                                    </label>

                                                </fieldset>

                                            </div>

                                            {% render 'form-error', error: form.error, class: 'mb-4' %}

                                            <div class="mb-4 text-end">

                                                <button
                                                    type="button"
                                                    id="product-review-cancel"
                                                    class="btn btn-secondary">{{ 'general.cancel' | t }}</button>

                                                <button type="submit" class="btn btn-primary">{{ 'general.submit' | t }}</button>

                                            </div>

                                        {% endform %}

                                    </div>

                                {% elsif session.logged_in == false and product.reviews_require_account %}

                                    {%- capture loginLink -%}<a href="{{ 'login' | link }}" class="fw-bold text-underline-indicator">
                                        {{- 'product.review_account_required_link_text' | t -}}
                                    </a>{%- endcapture -%}

                                    <span>
                                        {{- 'product.review_account_required' | t, link: loginLink -}}
                                    </span>

                                {% elsif product.default_or_selected_variant.customer_has_purchased == false and product.reviews_require_purchase %}

                                    <span>
                                        {{- 'product.review_purchase_required' | t -}}
                                    </span>

                                {% elsif product.default_or_selected_variant.customer_has_reviewed %}

                                    {% if product.reviews_require_approval %}

                                        <span>
                                            {{- 'product.review_publish_pending' | t -}}
                                        </span>

                                    {% else %}

                                        <span>
                                            {{- 'product.review_already_given' | t -}}
                                        </span>

                                    {% endif %}

                                {% endif %}

                            </div>

                            <div class="product-reviews-content{% if product.reviews.size > 0 %} has-content{% endif %}" data-aos="{{ settings.sectionAnimation }}">

                                {% for review in product.reviews %}

                                    <div class="product-review section-highlight-item{% if settings.sectionHighlightItems == false and forloop.first == false %} pt-4 border-top{% endif %}">

                                        <div class="product-review-title mb-0">

                                            <span class="product-review-title">
                                                {{ review.name }}
                                            </span>

                                        </div>

                                        <div class="product-review-date">

                                            {%- assign dateFormat = 'general.date_format' | t -%}

                                            <i>
                                                <time datetime="{{ review.created_at | date: "%F" }}">{{ review.created_at | date: dateFormat }}</time>
                                            </i>

                                        </div>

                                        <div class="product-review-rating">

                                            <div class="product-review-icons">

                                                {% for rating in (1..product.max_rating) %}

                                                    <div class="product-review-icon">

                                                        {% if review.rating >= rating %}

                                                            {%- render 'icon', icon: 'rating', class: 'text-review-icon' -%}

                                                        {% else %}

                                                            {%- render 'icon', icon: 'rating-empty', class: 'text-muted' -%}

                                                        {% endif %}

                                                    </div>

                                                {% endfor %}

                                            </div>

                                        </div>

                                        {%- if review.title or review.review -%}

                                            <div class="product-review-content">

                                                {% if review.title %}

                                                    <p class="mb-0 fw-medium">
                                                        {{ review.title }}
                                                    </p>

                                                {% endif %}

                                                {{ review.review }}

                                            </div>

                                        {% endif %}

                                    </div>

                                {% endfor %}

                            </div>

                        {%- endcapture -%}

                        {%- render 'section-tab-content', sectionTabContent: sectionTabContent, sectionTabContentClass: 'product-reviews' -%}

                    {% endif %}

                {% endif %}

                {% if section.settings.detailsShippingAndReturnRichtext %}

                    {%- capture sectionTabContent -%}

                        <div class="text-richtext" data-aos="{{ settings.sectionAnimation }}">
                            {{- section.settings.detailsShippingAndReturnRichtext -}}
                        </div>

                    {%- endcapture -%}

                    {%- render 'section-tab-content', sectionTabContent: sectionTabContent -%}

                {% endif %}

                {% if section.settings.detailsPaymentRichtext %}

                    {%- capture sectionTabContent -%}

                        <div class="text-richtext" data-aos="{{ settings.sectionAnimation }}">
                            {{- section.settings.detailsPaymentRichtext -}}
                        </div>

                    {%- endcapture -%}

                    {%- render 'section-tab-content', sectionTabContent: sectionTabContent -%}

                {% endif %}

            </div>

        </div>

        <div data-dynamic-partial="additional">

            {% if product.similar.size > 0 or request.design_mode %}

                {%- assign carouselTitle = 'product.similar_products' | t -%}

                <div class="mt-4 mt-md-g">

                    {% render 'section-header', sectionTitle: carouselTitle, sectionHeaderContainer: 'none' %}

                    <div class="product-carousel mt-4">
                        {% render 'product-carousel', items: product.similar, carouselFreemode: true %}
                    </div>

                </div>

            {% endif %}

            {% if product.compatible.size > 0 or request.design_mode %}

                {%- assign carouselTitle = 'product.compatible_products' | t -%}

                <div class="mt-4 mt-md-g">

                    {% render 'section-header', sectionTitle: carouselTitle, sectionHeaderContainer: 'none' %}

                    <div class="product-carousel mt-4">
                        {% render 'product-carousel', items: product.compatible, carouselFreemode: true %}
                    </div>

                </div>

            {% endif %}

            <script type="application/javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    document.dispatchEvent(new CustomEvent('theme:product:view', {
                        detail: {
                            id: {{ product.id | json }},
                            {%- if store.customer_has_purchase_right and product.default_or_selected_variant.in_preview == false -%}
                                price: {{ product.default_or_selected_variant.price | json }},
                            {%- else -%}
                                price: null,
                            {%- endif -%}
                            name: {{ product.title | json }},
                            manufacturer: {{ product.manufacturer.title | json }},
                            currency: {{ store.currency.iso_code | json }},
                            breadcrumbs: {{ product.breadcrumbs | map: 'title' | json }}
                        }
                    }));
                });
            </script>

        </div>

    {% endif %}

{%- endcapture -%}

{%- if rendered_partial == 'sections/product-template' -%}

    {% if section.settings.showBreadcrumbs %}
        {%- assign sectionBreadcrumbs = product.breadcrumbs -%}
    {% endif %}

    <div class="section-inner">

        {% render 'section-header', sectionBreadcrumbs: sectionBreadcrumbs %}

        <div class="section-content">
            {{- sectionContent -}}
        </div>

    </div>

{%- else -%}

    {% if request.uri contains 'create_review=true' and product.default_or_selected_variant.customer_has_reviewed == false and product.reviews_are_enabled %}

        {%- assign sectionTitle = 'product.write_product_review' | t -%}
        {%- assign sectionSubtitle = product.title -%}

        {% render 'section', section: section, sectionTitle: sectionTitle, sectionSubtitle: sectionSubtitle, sectionContent: sectionContent, sectionContainer: 'tiny', sectionContentOverflow: 'clip', sectionInnerGap: '2rem' %}

    {% else %}

        {% if section.settings.showBreadcrumbs %}
            {%- assign sectionBreadcrumbs = product.breadcrumbs -%}
        {% endif %}

        {% render 'section', section: section, sectionContent: sectionContent, sectionBreadcrumbs: sectionBreadcrumbs, sectionContentAnimation: false, sectionInnerGap: '2rem' %}

    {% endif %}

    {%- if settings.schemaProduct -%}
        {% render 'schemas/product', product: product %}
    {%- endif -%}

    {%- if settings.schemaBreadcrumbList -%}
        {% render 'schemas/breadcrumblist', breadcrumbs: product.breadcrumbs, currentItem: product %}
    {%- endif -%}

    {%- if product.default_or_selected_variant.in_preview == false -%}

        {%- if section.settings.showProductQuestionForm -%}

            <div class="modal fade" id="product-question-modal" tabindex="-1" aria-hidden="true">

                <div class="modal-dialog modal-dialog-centered">

                    <div class="modal-content">

                        <div class="modal-header border-bottom-0 pb-0 justify-content-end">

                            <button type="button" class="btn-text" data-bs-dismiss="modal" aria-label="{{- 'general.close' | t -}}">
                                {%- render 'icon', icon: 'close', class: 'svg-icon-fw' -%}
                            </button>

                        </div>

                        <div class="modal-body pt-0">

                            {% form 'contact' %}
            
                                {% if form.posted_successfully? %}

                                    <script type="application/javascript">
                                        document.addEventListener('theme:ready', function() {
                                            document.dispatchEvent(new CustomEvent('theme:contact:sendEmail'));
                                            theme.bs.Modal.getOrCreateInstance('#product-question-modal')?.show();
                                            setTimeout(() => theme.bs.Modal.getOrCreateInstance('#product-question-modal')?.hide(), 5000);
                                        });
                                    </script>

                                    <p class="my-4 text-center">
                                        {{- 'product.question.success' | t -}}
                                    </p>

                                {% else %}

                                    {% if form.error %}

                                        <script type="application/javascript">
                                            document.addEventListener('theme:ready', function() {
                                                theme.bs.Modal.getOrCreateInstance('#product-question-modal')?.show();
                                            });
                                        </script>

                                    {% endif %}
                                    
                                    <input
                                        type="hidden"
                                        name="subject"
                                        value="{{- 'product.question.subject' | t: product_name: product.title | escape -}}">

                                    <span class="d-block h3 text-title">
                                        {{- 'product.question.title' | t -}}
                                    </span>

                                    <div class="form-floating mb-4">

                                        <input
                                            type="text"
                                            id="product-question-modal-name"
                                            class="form-control"
                                            name="name"
                                            placeholder="{{ 'product.question.name' | t }}"
                                            value="{{ form.submitted.name | escape }}"
                                            required>

                                        <label for="product-question-modal-name">
                                            {{- 'product.question.name' | t -}}
                                        </label>

                                    </div>

                                    <div class="form-floating mb-4">

                                        <input
                                            type="email"
                                            id="product-question-modal-email"
                                            class="form-control"
                                            name="email"
                                            placeholder="{{ 'product.question.email' | t }}"
                                            value="{{ form.submitted.email | escape }}"
                                            required>

                                        <label for="product-question-modal-email">
                                            {{- 'product.question.email' | t -}}
                                        </label>

                                    </div>

                                    <div class="form-floating mb-4">

                                        <textarea
                                            id="product-question-modal-message"
                                            name="message"
                                            class="form-control"
                                            placeholder="{{ 'product.question.message' | t }}"
                                            required>{{ form.submitted.message | escape }}</textarea>

                                        <label for="product-question-modal-message">
                                            {{- 'product.question.message' | t -}}
                                        </label>

                                    </div>

                                    {% render 'form-error', error: form.error, class: 'mb-4' %}

                                    <button type="submit" class="btn btn-primary btn-sm d-block w-100">
                                        {{- 'product.question.cta' | t -}}
                                    </button>

                                {% endif %}

                            {% endform %}

                        </div>

                    </div>

                </div>

            </div>

        {%- endif -%}

        {%- if product.size_chart -%}

            <div class="modal fade" id="product-size-chart-modal" tabindex="-1" aria-hidden="true">

                <div class="modal-dialog modal-dialog-centered modal-lg">

                    <div class="modal-content">

                        <div class="modal-header border-bottom-0 pb-0 justify-content-end">

                            <button type="button" class="btn-text" data-bs-dismiss="modal" aria-label="{{- 'general.close' | t -}}">
                                {%- render 'icon', icon: 'close', class: 'svg-icon-fw' -%}
                            </button>

                        </div>

                        <div class="modal-body pt-0 d-flex flex-column gap-g">

                            <span class="d-block h3 text-title">
                                {{- 'product.size_chart.title' | t -}}
                            </span>

                            {% if product.size_chart.measuring_guide_image or product.size_chart.measuring_guide_instructions %}

                                {%- assign instructionsCharLength = product.size_chart.measuring_guide_instructions | strip_html | size %}

                                <div class="row gy-4 mb-g{% if instructionsCharLength < 300 and product.size_chart.measuring_guide_image %} row-cols-1{% endif %}">

                                    {% if product.size_chart.measuring_guide_instructions %}

                                        <div class="col text-richtext">
                                            {{- product.size_chart.measuring_guide_instructions -}}
                                        </div>

                                    {% endif %}

                                    {% if product.size_chart.measuring_guide_image %}

                                        <div class="col-auto">

                                            {% if product.size_chart.measuring_guide_instructions %}
                                                {%- assign imgSizeSm = '356,356' -%}
                                                {%- assign imgSizeMd = '335,335' -%}
                                                {%- assign imgSizeLg = '335,335' -%}

                                            {% else %}
                                                {%- assign imgSizeSm = '356,356' -%}
                                                {%- assign imgSizeMd = '680,680' -%}
                                                {%- assign imgSizeLg = '680,680' -%}
                                            {% endif %}

                                            <picture>
                                                <source media="(min-width: {{ settings.styleGridBreakpointLg }})" data-srcset="
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeLg }} 1x,
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeLg | thumb:'@2x' }} 2x">

                                                <source media="(min-width: {{ settings.styleGridBreakpointSm }})" data-srcset="
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeMd }} 1x,
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeMd | thumb:'@2x' }} 2x">

                                                <source data-srcset="
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeSm }} 1x,
                                                    {{- product.size_chart.measuring_guide_image | thumb: imgSizeSm | thumb:'@2x' }} 2x">

                                                <img
                                                    class="lazy d-block img-fluid"
                                                    alt="{{ product.size_chart.measuring_guide_image.alt }}"
                                                    src="{{ product.size_chart.measuring_guide_image | thumb: imgSizeSm }}">
                                            </picture>

                                        </div>

                                    {% endif %}

                                </div>

                            {% endif %}

                            {% if product.size_chart.conversion_table %}

                                {%- assign theadCols = product.size_chart.conversion_table | first -%}

                                <span class="d-block fw-bold">
                                    {{- 'product.size_chart.conversion_table' | t -}}
                                </span>

                                <div class="table-responsive">

                                    <table class="table table-striped table-borderless text-center">

                                        <thead>

                                            <tr>

                                                {% for value in theadCols %}

                                                    <th scope="col" class="fw-normal">
                                                        {{- value -}}
                                                    </th>

                                                {% endfor %}

                                            </tr>

                                        </thead>

                                        <tbody>

                                            {% for row in product.size_chart.conversion_table offset: 1 %}

                                                <tr>

                                                    {% for value in row %}

                                                        {% if forloop.first %}

                                                            <th scope="row" class="fw-normal">
                                                                {{- value -}}
                                                            </th>

                                                        {% else %}

                                                            <td>
                                                                {{- value -}}
                                                            </td>

                                                        {% endif %}

                                                    {% endfor %}

                                                </tr>

                                            {% endfor %}

                                        </tbody>

                                    </table>

                                </div>

                            {% endif %}

                            {% if product.size_chart.measurements_table %}

                                {%- assign theadCols = product.size_chart.measurements_table | first -%}

                                <span class="d-block fw-bold">
                                    {{- 'product.size_chart.measurements_table' | t -}}
                                </span>

                                <div class="table-responsive">

                                    <table class="table table-striped table-borderless text-center">

                                        <thead>

                                            <tr>

                                                {% for value in theadCols %}

                                                    <th scope="col" class="fw-normal">
                                                        {{- value -}}
                                                    </th>

                                                {% endfor %}

                                            </tr>

                                        </thead>

                                        <tbody>

                                            {% for row in product.size_chart.measurements_table offset: 1 %}

                                                <tr>

                                                    {% for value in row %}

                                                        {% if forloop.first %}

                                                            <th scope="row" class="fw-normal">
                                                                {{- value -}}
                                                            </th>

                                                        {% else %}

                                                            <td>
                                                                {{- value -}}
                                                            </td>

                                                        {% endif %}

                                                    {% endfor %}

                                                </tr>

                                            {% endfor %}

                                        </tbody>

                                    </table>

                                </div>

                            {% endif %}

                        </div>

                    </div>

                </div>

            </div>

        {%- endif -%}

    {%- endif -%}

{%- endif -%}

{%- if product.default_or_selected_variant.notifications_supported and product.default_or_selected_variant.is_out_of_stock and product.default_or_selected_variant.in_preview == false -%}

    <div class="modal fade" id="availability-notification-modal" tabindex="-1" aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered">

            <div class="modal-content">

                <div class="modal-header border-bottom-0 pb-0 justify-content-end">

                    <button type="button" class="btn-text" data-bs-dismiss="modal" aria-label="{{- 'general.close' | t -}}">
                        {%- render 'icon', icon: 'close', class: 'svg-icon-fw' -%}
                    </button>

                </div>

                <div class="modal-body pt-0">

                    {% form 'customer', product %}

                        {% if form.posted_successfully? %}

                            <script type="application/javascript">
                                document.addEventListener('theme:ready', function() {
                                    theme.bs.Modal.getOrCreateInstance('#availability-notification-modal')?.show();
                                    setTimeout(() => theme.bs.Modal.getOrCreateInstance('#availability-notification-modal')?.hide(), 5000);
                                });
                            </script>

                            <p class="my-4 text-center">
                                {{- 'product.availability_notification.success' | t -}}
                            </p>

                        {% elsif product.subscribed_to_notifications %}

                            <p class="my-4 text-center">
                                {{- 'product.availability_notification.already_subscribed' | t -}}
                            </p>

                        {% else %}

                            {% if form.error %}

                                <script type="application/javascript">
                                    document.addEventListener('theme:ready', function() {
                                        theme.bs.Modal.getOrCreateInstance('#availability-notification-modal')?.show();
                                    });
                                </script>

                            {% endif %}

                            <span class="d-block h3 text-title">
                                {{- 'product.availability_notification.title' | t -}}
                            </span>

                            <p>
                                {{- 'product.availability_notification.description' | t -}}
                            </p>

                            <div class="form-floating">

                                <input id="availability-notification-email" class="form-control" type="email" name="email" value="" placeholder="{{ 'general.email' | t }}" required>

                                <label for="availability-notification-email">
                                    {{- 'general.email' | t -}}
                                </label>

                            </div>

                            <button type="submit" class="btn btn-primary btn-sm w-100 mt-4">
                                {{- 'product.availability_notification.cta' | t -}}
                            </button>

                            {% render 'form-error', error: form.error, class: 'mt-4' %}

                        {% endif %}

                    {% endform %}

                </div>

            </div>

        </div>

    </div>

{%- endif -%}

{% schema %}
{
    "name": {
        "en": "Product",
        "fi": "Tuote"
    },
    "tag": "div",
    "class": "section section-product has-lazy",
    "is_creatable": false,
    "settings": {
        "list_type": "tabs",
        "groups": [
            {
                "title": {
                    "en": "Content",
                    "fi": "Sislt"
                },
                "settings": {
                    "list_type": "list",
                    "groups": [
                        {
                            "title": {
                                "en": "Shipping & return",
                                "fi": "Toimitus & palautus"
                            },
                            "settings": [
                                {
                                    "id": "detailsFreeShippingLimit",
                                    "type": "number",
                                    "format": "currency",
                                    "label": {
                                        "en": "Free shipping limit",
                                        "fi": "Ilmaisen toimituksen raja"
                                    }
                                },
                                {
                                    "id": "detailsShippingAndReturnRichtext",
                                    "type": "richtext",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sislt"
                                    }
                                }
                            ]
                        },
                        {
                            "title": {
                                "en": "Payment",
                                "fi": "Maksaminen"
                            },
                            "settings": [
                                {
                                    "id": "detailsPaymentRichtext",
                                    "type": "richtext",
                                    "label": {
                                        "en": "Content",
                                        "fi": "Sislt"
                                    }
                                }
                            ]
                        }
                    ]
                }
            },
            {
                "title": {
                    "en": "Settings",
                    "fi": "Asetukset"
                },
                "settings": [
                    {
                        "id": "showBreadcrumbs",
                        "type": "checkbox",
                        "label": {
                            "en": "Show breadcrumbs",
                            "fi": "Nyt leivnmuru"
                        },
                        "default": true
                    },
                    {
                        "id": "showBuyNowButton",
                        "type": "checkbox",
                        "label": {
                            "en": "Show Buy now button",
                            "fi": "Nyt Osta nyt -painike"
                        },
                        "default": true
                    },
                    {
                        "id": "showQuantitySelect",
                        "type": "checkbox",
                        "label": {
                            "en": "Show quantity select",
                            "fi": "Nyt mrvalinta"
                        },
                        "default": true
                    },
                    {
                        "id": "showProductQuestionForm",
                        "type": "checkbox",
                        "label": {
                            "en": "Show Ask a question button",
                            "fi": "Nyt Kysy tuotteesta -painike"
                        },
                        "default": true
                    },
                    {
                        "id": "showLowestPrice",
                        "type": "checkbox",
                        "label": {
                            "en": "Show the last 30 days lowest sale price",
                            "fi": "Nyt viimeisen 30 pivn alin myyntihinta"
                        },
                        "default": true
                    },
                    {
                        "id": "showVariantSelectionAsDropdown",
                        "type": "checkbox",
                        "label": {
                            "en": "Show options as dropdown menu",
                            "fi": "Nyt valinnat pudotusvalikkona"
                        },
                        "default": false
                    },
                    {
                        "id": "showProductCustomizationPrice",
                        "type": "checkbox",
                        "label": {
                            "en": "Show customization price",
                            "fi": "Nyt mukautuksen hinta"
                        },
                        "default": true
                    },
                    {
                        "id": "showProductCustomizationTotalPrice",
                        "type": "checkbox",
                        "label": {
                            "en": "Show total price in customization",
                            "fi": "Nyt mukautuksessa yhteishinta"
                        },
                        "default": false
                    },
                    {
                        "id": "showProductCustomizationStockBalance",
                        "type": "checkbox",
                        "label": {
                            "en": "Show customization stock balance",
                            "fi": "Nyt mukautuksessa varastosaldo"
                        },
                        "default": false
                    },
                    {
                        "id": "showSimpleProductCustomizationInputElements",
                        "type": "checkbox",
                        "label": {
                            "en": "Use simple input elements on customization",
                            "fi": "Kyt mukautuksessa yksinkertaisia syttelementtej"
                        },
                        "default": true
                    },
                    {
                        "type": "spacer"
                    },
                    {
                        "id": "customDisplayInformation",
                        "type": "radio-pill",
                        "label": {
                            "en": "Information to display",
                            "fi": "Nytettvt tuotetiedot"
                        },
                        "default": false,
                        "options": [
                            {
                                "value": false,
                                "label": "Auto"
                            },
                            {
                                "value": true,
                                "label": {
                                    "en": "Custom",
                                    "fi": "Mukautettu"
                                }
                            }
                        ]
                    },
                    {
                        "type": "separator",
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showManufacturer",
                        "type": "checkbox",
                        "label": {
                            "en": "Show manufacturer",
                            "fi": "Nyt valmistaja"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showPromotion",
                        "type": "checkbox",
                        "label": {
                            "en": "Show promotion",
                            "fi": "Nyt kampanja"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showNewBadge",
                        "type": "checkbox",
                        "label": {
                            "en": "Show new badge",
                            "fi": "Nyt uutuusmerkki"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showPromotionBadge",
                        "type": "checkbox",
                        "label": {
                            "en": "Promotion badge",
                            "fi": "Kampanjamerkki"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showDiscountBadge",
                        "type": "checkbox",
                        "label": {
                            "en": "Show discount badge",
                            "fi": "Nyt alennusmerkki"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showOutOfStockBadge",
                        "type": "checkbox",
                        "label": {
                            "en": "Show out of stock badge",
                            "fi": "Nyt loppumerkki"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "id": "showStockBalance",
                        "type": "checkbox",
                        "label": {
                            "en": "Show stock balance",
                            "fi": "Nyt saatavuus"
                        },
                        "default": true,
                        "conditions": ["customDisplayInformation eq true"]
                    },
                    {
                        "type": "title",
                        "label": {
                            "en": "Legacy settings",
                            "fi": "Vanhat asetukset"
                        }
                    },
                    {
                        "type": "label",
                        "label": {
                            "en": "These settings are ment for backwards compatibility and should not be used if you are new merchant.",
                            "fi": "Nm asetukset on tarkoitettu taaksepin yhteensopivuuteen ja niit ei tulisi kytt, jos olet uusi kauppias."
                        }
                    },
                    {
                        "type": "spacer"
                    },
                    {
                        "id": "showRelatedProductsAsOptions",
                        "type": "checkbox",
                        "label": {
                            "en": "Show related products as options",
                            "fi": "Nyt liittyvt tuotteet valintoina"
                        },
                        "default": false
                    }
                ]
            }
        ]
    }
}
{% endschema %}